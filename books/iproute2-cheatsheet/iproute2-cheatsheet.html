<!DOCTYPE HTML>
<html lang="">
<head>
    <meta charset="UTF-8">
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <title>Overview</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="description" content="">
    <meta name="generator" content="GitBook 3.2.3">
    <link rel="stylesheet" href="/public/gitbook/style.css">
    <link rel="stylesheet" href="/public/gitbook/gitbook-plugin-tbfed-pagefooter/footer.css">
    <link rel="stylesheet" href="/public/gitbook/gitbook-plugin-back-to-top-button/plugin.css">
    <link rel="stylesheet" href="/public/gitbook/gitbook-plugin-page-toc-button/plugin.css">
    <link rel="stylesheet" href="/public/gitbook/gitbook-plugin-highlight/website.css">
    <!--
    <link rel="stylesheet" href="/public/gitbook/gitbook-plugin-search/search.css">
    -->
    <link rel="stylesheet" href="/public/gitbook/gitbook-plugin-search-plus/search.css">
    <link rel="stylesheet" href="/public/gitbook/gitbook-plugin-fontsettings/website.css">
    <link rel="stylesheet" href="/public/gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.css">
    <link rel="stylesheet" href="/public/gitbook/gitbook-plugin-splitter/splitter.css">
    <link href="page_styles.css" rel="stylesheet" type="text/css"><link href="stylesheet.css" rel="stylesheet" type="text/css">
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152"
          href="/public/gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="/public/gitbook/images/favicon.ico" type="image/x-icon">
    <link rel="prev" href="index.html"/>
</head>
<body>
<div class="book">
    <div class="book-summary">
        <div id="book-search-input" role="search">
            <input type="text" placeholder="Type to search"/>
        </div>
    <nav role="navigation">
    <ul class="summary">
<li class="chapter" data-level="1" data-path="titlepage.html">
    <a href="titlepage.html">Title Page</a>
    
<ul class="articles">
<li class="chapter" data-level="1.1" data-path="SUMMARY.html">
    <a href="SUMMARY.html">Table of Contents</a>
</li>
</ul>
</li>
<li class="chapter" data-level="2" data-path="index.html">
    <a href="index.html">Introduction</a>
</li>
<li class="chapter" data-level="3" data-path="iproute2-cheatsheet.html">
    <a href="iproute2-cheatsheet.html">Overview</a>
</li>
<li class="chapter" data-level="4" data-path="iproute2-cheatsheet.html#address-management">
    <a href="iproute2-cheatsheet.html#address-management">Address management</a>
    
<ul class="articles">
<li class="chapter" data-level="4.1" data-path="iproute2-cheatsheet.html#show-all-addresses">
    <a href="iproute2-cheatsheet.html#show-all-addresses">1. Show all addresses</a>
</li>
<li class="chapter" data-level="4.2" data-path="iproute2-cheatsheet.html#show-addresses-for-a-single-interface">
    <a href="iproute2-cheatsheet.html#show-addresses-for-a-single-interface">2. Show addresses for a single interface</a>
</li>
<li class="chapter" data-level="4.3" data-path="iproute2-cheatsheet.html#show-addresses-only-for-running-interfaces">
    <a href="iproute2-cheatsheet.html#show-addresses-only-for-running-interfaces">3. Show addresses only for running interfaces</a>
</li>
<li class="chapter" data-level="4.4" data-path="iproute2-cheatsheet.html#show-only-static-or-dynamic-ipv6-addresses">
    <a href="iproute2-cheatsheet.html#show-only-static-or-dynamic-ipv6-addresses">4. Show only static or dynamic IPv6 addresses</a>
</li>
<li class="chapter" data-level="4.5" data-path="iproute2-cheatsheet.html#add-an-address-to-an-interface">
    <a href="iproute2-cheatsheet.html#add-an-address-to-an-interface">5. Add an address to an interface</a>
</li>
<li class="chapter" data-level="4.6" data-path="iproute2-cheatsheet.html#add-an-address-with-human-readable-description">
    <a href="iproute2-cheatsheet.html#add-an-address-with-human-readable-description">6. Add an address with human-readable description</a>
</li>
<li class="chapter" data-level="4.7" data-path="iproute2-cheatsheet.html#delete-an-address">
    <a href="iproute2-cheatsheet.html#delete-an-address">7. Delete an address</a>
</li>
<li class="chapter" data-level="4.8" data-path="iproute2-cheatsheet.html#remove-all-addresses-from-an-interface">
    <a href="iproute2-cheatsheet.html#remove-all-addresses-from-an-interface">8. Remove all addresses from an interface</a>
</li>
<li class="chapter" data-level="4.9" data-path="iproute2-cheatsheet.html#notes">
    <a href="iproute2-cheatsheet.html#notes">9. Notes</a>
</li>
</ul>
</li>
<li class="chapter" data-level="5" data-path="iproute2-cheatsheet.html#neighbor-arp-and-ndp-table-management">
    <a href="iproute2-cheatsheet.html#neighbor-arp-and-ndp-table-management">Neighbor (ARP and NDP) table management</a>
    
<ul class="articles">
<li class="chapter" data-level="5.1" data-path="iproute2-cheatsheet.html#view-neighbor-tables">
    <a href="iproute2-cheatsheet.html#view-neighbor-tables">1. View neighbor tables</a>
</li>
<li class="chapter" data-level="5.2" data-path="iproute2-cheatsheet.html#view-neighbors-for-single-interface">
    <a href="iproute2-cheatsheet.html#view-neighbors-for-single-interface">2. View neighbors for single interface</a>
</li>
<li class="chapter" data-level="5.3" data-path="iproute2-cheatsheet.html#flush-table-for-an-interface">
    <a href="iproute2-cheatsheet.html#flush-table-for-an-interface">3. Flush table for an interface</a>
</li>
<li class="chapter" data-level="5.4" data-path="iproute2-cheatsheet.html#add-a-neighbor-table-entry">
    <a href="iproute2-cheatsheet.html#add-a-neighbor-table-entry">4. Add a neighbor table entry</a>
</li>
<li class="chapter" data-level="5.5" data-path="iproute2-cheatsheet.html#delete-a-neighbor-table-entry">
    <a href="iproute2-cheatsheet.html#delete-a-neighbor-table-entry">5. Delete a neighbor table entry</a>
</li>
</ul>
</li>
<li class="chapter" data-level="6" data-path="iproute2-cheatsheet.html#link-management">
    <a href="iproute2-cheatsheet.html#link-management">Link management</a>
    
<ul class="articles">
<li class="chapter" data-level="6.1" data-path="iproute2-cheatsheet.html#show-information-about-all-links">
    <a href="iproute2-cheatsheet.html#show-information-about-all-links">1. Show information about all links</a>
</li>
<li class="chapter" data-level="6.2" data-path="iproute2-cheatsheet.html#show-information-about-specific-link">
    <a href="iproute2-cheatsheet.html#show-information-about-specific-link">2. Show information about specific link</a>
</li>
<li class="chapter" data-level="6.3" data-path="iproute2-cheatsheet.html#bring-a-link-up-or-down">
    <a href="iproute2-cheatsheet.html#bring-a-link-up-or-down">3. Bring a link up or down</a>
</li>
<li class="chapter" data-level="6.4" data-path="iproute2-cheatsheet.html#set-human-readable-link-description">
    <a href="iproute2-cheatsheet.html#set-human-readable-link-description">4. Set human-readable link description</a>
</li>
<li class="chapter" data-level="6.5" data-path="iproute2-cheatsheet.html#rename-an-interface">
    <a href="iproute2-cheatsheet.html#rename-an-interface">5. Rename an interface</a>
</li>
<li class="chapter" data-level="6.6" data-path="iproute2-cheatsheet.html#change-link-layer-address-usually-mac-address">
    <a href="iproute2-cheatsheet.html#change-link-layer-address-usually-mac-address">6. Change link layer address (usually MAC address)</a>
</li>
<li class="chapter" data-level="6.7" data-path="iproute2-cheatsheet.html#change-link-mtu">
    <a href="iproute2-cheatsheet.html#change-link-mtu">7. Change link MTU</a>
</li>
<li class="chapter" data-level="6.8" data-path="iproute2-cheatsheet.html#delete-a-link">
    <a href="iproute2-cheatsheet.html#delete-a-link">8. Delete a link</a>
</li>
<li class="chapter" data-level="6.9" data-path="iproute2-cheatsheet.html#enable-or-disable-multicast-on-an-interface">
    <a href="iproute2-cheatsheet.html#enable-or-disable-multicast-on-an-interface">9. Enable or disable multicast on an interface</a>
</li>
<li class="chapter" data-level="6.10" data-path="iproute2-cheatsheet.html#enable-or-disable-arp-on-an-interface">
    <a href="iproute2-cheatsheet.html#enable-or-disable-arp-on-an-interface">10. Enable or disable ARP on an interface</a>
</li>
<li class="chapter" data-level="6.11" data-path="iproute2-cheatsheet.html#create-a-vlan-interface">
    <a href="iproute2-cheatsheet.html#create-a-vlan-interface">11. Create a VLAN interface</a>
</li>
<li class="chapter" data-level="6.12" data-path="iproute2-cheatsheet.html#create-a-qinq-interface-vlan-stacking">
    <a href="iproute2-cheatsheet.html#create-a-qinq-interface-vlan-stacking">12. Create a QinQ interface (VLAN stacking)</a>
</li>
<li class="chapter" data-level="6.13" data-path="iproute2-cheatsheet.html#create-pseudo-ethernet-aka-macvlan-interface">
    <a href="iproute2-cheatsheet.html#create-pseudo-ethernet-aka-macvlan-interface">13. Create pseudo-ethernet (aka macvlan) interface</a>
</li>
<li class="chapter" data-level="6.14" data-path="iproute2-cheatsheet.html#create-a-dummy-interface">
    <a href="iproute2-cheatsheet.html#create-a-dummy-interface">14. Create a dummy interface</a>
</li>
<li class="chapter" data-level="6.15" data-path="iproute2-cheatsheet.html#create-a-bridge-interface">
    <a href="iproute2-cheatsheet.html#create-a-bridge-interface">15. Create a bridge interface</a>
</li>
<li class="chapter" data-level="6.16" data-path="iproute2-cheatsheet.html#add-an-interface-to-bridge">
    <a href="iproute2-cheatsheet.html#add-an-interface-to-bridge">16. Add an interface to bridge</a>
</li>
<li class="chapter" data-level="6.17" data-path="iproute2-cheatsheet.html#remove-interface-from-bridge">
    <a href="iproute2-cheatsheet.html#remove-interface-from-bridge">17. Remove interface from bridge</a>
</li>
<li class="chapter" data-level="6.18" data-path="iproute2-cheatsheet.html#create-a-bonding-interface">
    <a href="iproute2-cheatsheet.html#create-a-bonding-interface">18. Create a bonding interface</a>
</li>
<li class="chapter" data-level="6.19" data-path="iproute2-cheatsheet.html#create-an-intermediate-functional-block-interface">
    <a href="iproute2-cheatsheet.html#create-an-intermediate-functional-block-interface">19. Create an intermediate functional block interface</a>
</li>
<li class="chapter" data-level="6.20" data-path="iproute2-cheatsheet.html#create-a-pair-of-virtual-ethernet-devices">
    <a href="iproute2-cheatsheet.html#create-a-pair-of-virtual-ethernet-devices">20. Create a pair of virtual ethernet devices</a>
</li>
</ul>
</li>
<li class="chapter" data-level="7" data-path="iproute2-cheatsheet.html#link-group-management">
    <a href="iproute2-cheatsheet.html#link-group-management">Link group management</a>
    
<ul class="articles">
<li class="chapter" data-level="7.1" data-path="iproute2-cheatsheet.html#add-an-interface-to-a-group">
    <a href="iproute2-cheatsheet.html#add-an-interface-to-a-group">1. Add an interface to a group</a>
</li>
<li class="chapter" data-level="7.2" data-path="iproute2-cheatsheet.html#remove-an-interface-from-a-group">
    <a href="iproute2-cheatsheet.html#remove-an-interface-from-a-group">2. Remove an interface from a group</a>
</li>
<li class="chapter" data-level="7.3" data-path="iproute2-cheatsheet.html#assign-a-symbolic-name-to-a-group">
    <a href="iproute2-cheatsheet.html#assign-a-symbolic-name-to-a-group">3. Assign a symbolic name to a group</a>
</li>
<li class="chapter" data-level="7.4" data-path="iproute2-cheatsheet.html#perform-an-operation-on-a-group">
    <a href="iproute2-cheatsheet.html#perform-an-operation-on-a-group">4. Perform an operation on a group</a>
</li>
<li class="chapter" data-level="7.5" data-path="iproute2-cheatsheet.html#view-information-about-links-from-specific-group">
    <a href="iproute2-cheatsheet.html#view-information-about-links-from-specific-group">5. View information about links from specific group</a>
</li>
</ul>
</li>
<li class="chapter" data-level="8" data-path="iproute2-cheatsheet.html#tun-and-tap-devices">
    <a href="iproute2-cheatsheet.html#tun-and-tap-devices">Tun and Tap devices</a>
    
<ul class="articles">
<li class="chapter" data-level="8.1" data-path="iproute2-cheatsheet.html#view-tuntap-devices">
    <a href="iproute2-cheatsheet.html#view-tuntap-devices">1. View tun/tap devices</a>
</li>
<li class="chapter" data-level="8.2" data-path="iproute2-cheatsheet.html#add-an-tuntap-device-useable-by-the-root-user">
    <a href="iproute2-cheatsheet.html#add-an-tuntap-device-useable-by-the-root-user">2. Add an tun/tap device useable by the root user</a>
</li>
<li class="chapter" data-level="8.3" data-path="iproute2-cheatsheet.html#add-an-tuntap-device-usable-by-an-ordinary-user">
    <a href="iproute2-cheatsheet.html#add-an-tuntap-device-usable-by-an-ordinary-user">3. Add an tun/tap device usable by an ordinary user</a>
</li>
<li class="chapter" data-level="8.4" data-path="iproute2-cheatsheet.html#add-an-tuntap-device-using-an-alternate-packet-format">
    <a href="iproute2-cheatsheet.html#add-an-tuntap-device-using-an-alternate-packet-format">4. Add an tun/tap device using an alternate packet format</a>
</li>
<li class="chapter" data-level="8.5" data-path="iproute2-cheatsheet.html#add-an-tuntap-ignoring-flow-control">
    <a href="iproute2-cheatsheet.html#add-an-tuntap-ignoring-flow-control">5. Add an tun/tap ignoring flow control</a>
</li>
<li class="chapter" data-level="8.6" data-path="iproute2-cheatsheet.html#delete-tuntap-device">
    <a href="iproute2-cheatsheet.html#delete-tuntap-device">6. Delete tun/tap device</a>
</li>
</ul>
</li>
<li class="chapter" data-level="9" data-path="iproute2-cheatsheet.html#tunnel-management">
    <a href="iproute2-cheatsheet.html#tunnel-management">Tunnel management</a>
    
<ul class="articles">
<li class="chapter" data-level="9.1" data-path="iproute2-cheatsheet.html#create-an-ipip-tunnel">
    <a href="iproute2-cheatsheet.html#create-an-ipip-tunnel">1. Create an IPIP tunnel</a>
</li>
<li class="chapter" data-level="9.2" data-path="iproute2-cheatsheet.html#create-a-sit-tunnel">
    <a href="iproute2-cheatsheet.html#create-a-sit-tunnel">2. Create a SIT tunnel</a>
</li>
<li class="chapter" data-level="9.3" data-path="iproute2-cheatsheet.html#create-an-ipip6-tunnel">
    <a href="iproute2-cheatsheet.html#create-an-ipip6-tunnel">3. Create an IPIP6 tunnel</a>
</li>
<li class="chapter" data-level="9.4" data-path="iproute2-cheatsheet.html#create-an-ip6ip6-tunnel">
    <a href="iproute2-cheatsheet.html#create-an-ip6ip6-tunnel">4. Create an IP6IP6 tunnel</a>
</li>
<li class="chapter" data-level="9.5" data-path="iproute2-cheatsheet.html#create-a-gretap-ethernet-over-gre-device">
    <a href="iproute2-cheatsheet.html#create-a-gretap-ethernet-over-gre-device">5. Create a gretap (ethernet over GRE) device</a>
</li>
<li class="chapter" data-level="9.6" data-path="iproute2-cheatsheet.html#create-a-gre-tunnel">
    <a href="iproute2-cheatsheet.html#create-a-gre-tunnel">6. Create a GRE tunnel</a>
</li>
<li class="chapter" data-level="9.7" data-path="iproute2-cheatsheet.html#create-multiple-gre-tunnels-to-the-same-endpoint">
    <a href="iproute2-cheatsheet.html#create-multiple-gre-tunnels-to-the-same-endpoint">7. Create multiple GRE tunnels to the same endpoint</a>
</li>
<li class="chapter" data-level="9.8" data-path="iproute2-cheatsheet.html#create-a-point-to-multipoint-gre-tunnel">
    <a href="iproute2-cheatsheet.html#create-a-point-to-multipoint-gre-tunnel">8. Create a point-to-multipoint GRE tunnel</a>
</li>
<li class="chapter" data-level="9.9" data-path="iproute2-cheatsheet.html#create-a-gre-tunnel-over-ipv6">
    <a href="iproute2-cheatsheet.html#create-a-gre-tunnel-over-ipv6">9. Create a GRE tunnel over IPv6</a>
</li>
<li class="chapter" data-level="9.10" data-path="iproute2-cheatsheet.html#delete-a-tunnel">
    <a href="iproute2-cheatsheet.html#delete-a-tunnel">10. Delete a tunnel</a>
</li>
<li class="chapter" data-level="9.11" data-path="iproute2-cheatsheet.html#modify-a-tunnel">
    <a href="iproute2-cheatsheet.html#modify-a-tunnel">11. Modify a tunnel</a>
</li>
<li class="chapter" data-level="9.12" data-path="iproute2-cheatsheet.html#view-tunnel-information">
    <a href="iproute2-cheatsheet.html#view-tunnel-information">12. View tunnel information</a>
</li>
</ul>
</li>
<li class="chapter" data-level="10" data-path="iproute2-cheatsheet.html#l2tpv3-pseudowire-management">
    <a href="iproute2-cheatsheet.html#l2tpv3-pseudowire-management">L2TPv3 pseudowire management</a>
    
<ul class="articles">
<li class="chapter" data-level="10.1" data-path="iproute2-cheatsheet.html#create-an-l2tpv3-tunnel-over-udp">
    <a href="iproute2-cheatsheet.html#create-an-l2tpv3-tunnel-over-udp">1. Create an L2TPv3 tunnel over UDP</a>
</li>
<li class="chapter" data-level="10.2" data-path="iproute2-cheatsheet.html#create-an-l2tpv3-tunnel-over-ip">
    <a href="iproute2-cheatsheet.html#create-an-l2tpv3-tunnel-over-ip">2. Create an L2TPv3 tunnel over IP</a>
</li>
<li class="chapter" data-level="10.3" data-path="iproute2-cheatsheet.html#create-an-l2tpv3-session">
    <a href="iproute2-cheatsheet.html#create-an-l2tpv3-session">3. Create an L2TPv3 session</a>
</li>
<li class="chapter" data-level="10.4" data-path="iproute2-cheatsheet.html#delete-an-l2tpv3-session">
    <a href="iproute2-cheatsheet.html#delete-an-l2tpv3-session">4. Delete an L2TPv3 session</a>
</li>
<li class="chapter" data-level="10.5" data-path="iproute2-cheatsheet.html#delete-an-l2tpv3-tunnel">
    <a href="iproute2-cheatsheet.html#delete-an-l2tpv3-tunnel">5. Delete an L2TPv3 tunnel</a>
</li>
<li class="chapter" data-level="10.6" data-path="iproute2-cheatsheet.html#view-l2tpv3-tunnel-information">
    <a href="iproute2-cheatsheet.html#view-l2tpv3-tunnel-information">6. View L2TPv3 tunnel information</a>
</li>
<li class="chapter" data-level="10.7" data-path="iproute2-cheatsheet.html#view-l2tpv3-session-information">
    <a href="iproute2-cheatsheet.html#view-l2tpv3-session-information">7. View L2TPv3 session information</a>
</li>
</ul>
</li>
<li class="chapter" data-level="11" data-path="iproute2-cheatsheet.html#vxlan-management">
    <a href="iproute2-cheatsheet.html#vxlan-management">VXLAN management</a>
    
<ul class="articles">
<li class="chapter" data-level="11.1" data-path="iproute2-cheatsheet.html#create-unicast-vxlan-link">
    <a href="iproute2-cheatsheet.html#create-unicast-vxlan-link">1. Create unicast VXLAN link</a>
</li>
<li class="chapter" data-level="11.2" data-path="iproute2-cheatsheet.html#create-multicast-vxlan-link">
    <a href="iproute2-cheatsheet.html#create-multicast-vxlan-link">2. Create multicast VXLAN link</a>
</li>
</ul>
</li>
<li class="chapter" data-level="12" data-path="iproute2-cheatsheet.html#route-management">
    <a href="iproute2-cheatsheet.html#route-management">Route management</a>
    
<ul class="articles">
<li class="chapter" data-level="12.1" data-path="iproute2-cheatsheet.html#connected-routes">
    <a href="iproute2-cheatsheet.html#connected-routes">1. Connected routes</a>
</li>
<li class="chapter" data-level="12.2" data-path="iproute2-cheatsheet.html#view-all-routes">
    <a href="iproute2-cheatsheet.html#view-all-routes">2. View all routes</a>
</li>
<li class="chapter" data-level="12.3" data-path="iproute2-cheatsheet.html#view-routes-to-a-network-and-all-its-subnets">
    <a href="iproute2-cheatsheet.html#view-routes-to-a-network-and-all-its-subnets">3. View routes to a network and all its subnets</a>
</li>
<li class="chapter" data-level="12.4" data-path="iproute2-cheatsheet.html#view-routes-to-a-network-and-all-supernets">
    <a href="iproute2-cheatsheet.html#view-routes-to-a-network-and-all-supernets">4. View routes to a network and all supernets</a>
</li>
<li class="chapter" data-level="12.5" data-path="iproute2-cheatsheet.html#view-routes-to-exact-subnet">
    <a href="iproute2-cheatsheet.html#view-routes-to-exact-subnet">5. View routes to exact subnet</a>
</li>
<li class="chapter" data-level="12.6" data-path="iproute2-cheatsheet.html#view-only-the-route-actually-used-by-the-kernel">
    <a href="iproute2-cheatsheet.html#view-only-the-route-actually-used-by-the-kernel">6. View only the route actually used by the kernel</a>
</li>
<li class="chapter" data-level="12.7" data-path="iproute2-cheatsheet.html#view-route-cache-pre-3.6-kernels-only">
    <a href="iproute2-cheatsheet.html#view-route-cache-pre-3.6-kernels-only">7. View route cache (pre 3.6 kernels only)</a>
</li>
<li class="chapter" data-level="12.8" data-path="iproute2-cheatsheet.html#add-a-route-via-gateway">
    <a href="iproute2-cheatsheet.html#add-a-route-via-gateway">8. Add a route via gateway</a>
</li>
<li class="chapter" data-level="12.9" data-path="iproute2-cheatsheet.html#add-a-route-via-interface">
    <a href="iproute2-cheatsheet.html#add-a-route-via-interface">9. Add a route via interface</a>
</li>
<li class="chapter" data-level="12.10" data-path="iproute2-cheatsheet.html#change-or-replace-a-route">
    <a href="iproute2-cheatsheet.html#change-or-replace-a-route">10. Change or replace a route</a>
</li>
<li class="chapter" data-level="12.11" data-path="iproute2-cheatsheet.html#delete-a-route">
    <a href="iproute2-cheatsheet.html#delete-a-route">11. Delete a route</a>
</li>
<li class="chapter" data-level="12.12" data-path="iproute2-cheatsheet.html#default-route">
    <a href="iproute2-cheatsheet.html#default-route">12. Default route</a>
</li>
<li class="chapter" data-level="12.13" data-path="iproute2-cheatsheet.html#blackhole-routes">
    <a href="iproute2-cheatsheet.html#blackhole-routes">13. Blackhole routes</a>
</li>
<li class="chapter" data-level="12.14" data-path="iproute2-cheatsheet.html#other-special-routes">
    <a href="iproute2-cheatsheet.html#other-special-routes">14. Other special routes</a>
</li>
<li class="chapter" data-level="12.15" data-path="iproute2-cheatsheet.html#routes-with-different-metric">
    <a href="iproute2-cheatsheet.html#routes-with-different-metric">15. Routes with different metric</a>
</li>
<li class="chapter" data-level="12.16" data-path="iproute2-cheatsheet.html#multipath-routing">
    <a href="iproute2-cheatsheet.html#multipath-routing">16. Multipath routing</a>
</li>
</ul>
</li>
<li class="chapter" data-level="13" data-path="iproute2-cheatsheet.html#policy-based-routing">
    <a href="iproute2-cheatsheet.html#policy-based-routing">Policy-based routing</a>
    
<ul class="articles">
<li class="chapter" data-level="13.1" data-path="iproute2-cheatsheet.html#create-a-policy-route">
    <a href="iproute2-cheatsheet.html#create-a-policy-route">1. Create a policy route</a>
</li>
<li class="chapter" data-level="13.2" data-path="iproute2-cheatsheet.html#view-policy-routes">
    <a href="iproute2-cheatsheet.html#view-policy-routes">2. View policy routes</a>
</li>
<li class="chapter" data-level="13.3" data-path="iproute2-cheatsheet.html#general-rule-syntax">
    <a href="iproute2-cheatsheet.html#general-rule-syntax">3. General rule syntax</a>
</li>
<li class="chapter" data-level="13.4" data-path="iproute2-cheatsheet.html#create-a-rule-to-match-a-source-network">
    <a href="iproute2-cheatsheet.html#create-a-rule-to-match-a-source-network">4. Create a rule to match a source network</a>
</li>
<li class="chapter" data-level="13.5" data-path="iproute2-cheatsheet.html#create-a-rule-to-match-a-destination-network">
    <a href="iproute2-cheatsheet.html#create-a-rule-to-match-a-destination-network">5. Create a rule to match a destination network</a>
</li>
<li class="chapter" data-level="13.6" data-path="iproute2-cheatsheet.html#create-a-rule-to-match-a-tos-field-value">
    <a href="iproute2-cheatsheet.html#create-a-rule-to-match-a-tos-field-value">6. Create a rule to match a ToS field value</a>
</li>
<li class="chapter" data-level="13.7" data-path="iproute2-cheatsheet.html#create-a-rule-to-match-a-firewall-mark-value">
    <a href="iproute2-cheatsheet.html#create-a-rule-to-match-a-firewall-mark-value">7. Create a rule to match a firewall mark value</a>
</li>
<li class="chapter" data-level="13.8" data-path="iproute2-cheatsheet.html#create-a-rule-to-match-inbound-interface">
    <a href="iproute2-cheatsheet.html#create-a-rule-to-match-inbound-interface">8. Create a rule to match inbound interface</a>
</li>
<li class="chapter" data-level="13.9" data-path="iproute2-cheatsheet.html#create-a-rule-to-match-outbound-interface">
    <a href="iproute2-cheatsheet.html#create-a-rule-to-match-outbound-interface">9. Create a rule to match outbound interface</a>
</li>
<li class="chapter" data-level="13.10" data-path="iproute2-cheatsheet.html#set-rule-priority">
    <a href="iproute2-cheatsheet.html#set-rule-priority">10. Set rule priority</a>
</li>
<li class="chapter" data-level="13.11" data-path="iproute2-cheatsheet.html#show-all-rules">
    <a href="iproute2-cheatsheet.html#show-all-rules">11. Show all rules</a>
</li>
<li class="chapter" data-level="13.12" data-path="iproute2-cheatsheet.html#delete-a-rule">
    <a href="iproute2-cheatsheet.html#delete-a-rule">12. Delete a rule</a>
</li>
<li class="chapter" data-level="13.13" data-path="iproute2-cheatsheet.html#delete-all-rules">
    <a href="iproute2-cheatsheet.html#delete-all-rules">13. Delete all rules</a>
</li>
</ul>
</li>
<li class="chapter" data-level="14" data-path="iproute2-cheatsheet.html#network-namespace-management">
    <a href="iproute2-cheatsheet.html#network-namespace-management">Network namespace management</a>
    
<ul class="articles">
<li class="chapter" data-level="14.1" data-path="iproute2-cheatsheet.html#create-a-namespace">
    <a href="iproute2-cheatsheet.html#create-a-namespace">1. Create a namespace</a>
</li>
<li class="chapter" data-level="14.2" data-path="iproute2-cheatsheet.html#list-existing-namespaces">
    <a href="iproute2-cheatsheet.html#list-existing-namespaces">2. List existing namespaces</a>
</li>
<li class="chapter" data-level="14.3" data-path="iproute2-cheatsheet.html#delete-a-namespace">
    <a href="iproute2-cheatsheet.html#delete-a-namespace">3. Delete a namespace</a>
</li>
<li class="chapter" data-level="14.4" data-path="iproute2-cheatsheet.html#run-a-process-inside-a-namespace">
    <a href="iproute2-cheatsheet.html#run-a-process-inside-a-namespace">4. Run a process inside a namespace</a>
</li>
<li class="chapter" data-level="14.5" data-path="iproute2-cheatsheet.html#list-all-processes-assigned-to-a-namespace">
    <a href="iproute2-cheatsheet.html#list-all-processes-assigned-to-a-namespace">5. List all processes assigned to a namespace</a>
</li>
<li class="chapter" data-level="14.6" data-path="iproute2-cheatsheet.html#identify-process-primary-namespace">
    <a href="iproute2-cheatsheet.html#identify-process-primary-namespace">6. Identify process' primary namespace</a>
</li>
<li class="chapter" data-level="14.7" data-path="iproute2-cheatsheet.html#assign-network-interface-to-a-namespace">
    <a href="iproute2-cheatsheet.html#assign-network-interface-to-a-namespace">7. Assign network interface to a namespace</a>
</li>
<li class="chapter" data-level="14.8" data-path="iproute2-cheatsheet.html#connect-one-namespace-to-another">
    <a href="iproute2-cheatsheet.html#connect-one-namespace-to-another">8. Connect one namespace to another</a>
</li>
<li class="chapter" data-level="14.9" data-path="iproute2-cheatsheet.html#monitor-network-namespace-subsystem-events">
    <a href="iproute2-cheatsheet.html#monitor-network-namespace-subsystem-events">9. Monitor network namespace subsystem events</a>
</li>
</ul>
</li>
<li class="chapter" data-level="15" data-path="iproute2-cheatsheet.html#multicast-management">
    <a href="iproute2-cheatsheet.html#multicast-management">Multicast management</a>
    
<ul class="articles">
<li class="chapter" data-level="15.1" data-path="iproute2-cheatsheet.html#view-multicast-groups">
    <a href="iproute2-cheatsheet.html#view-multicast-groups">1. View multicast groups</a>
</li>
<li class="chapter" data-level="15.2" data-path="iproute2-cheatsheet.html#add-a-link-layer-multicast-address">
    <a href="iproute2-cheatsheet.html#add-a-link-layer-multicast-address">2. Add a link-layer multicast address</a>
</li>
<li class="chapter" data-level="15.3" data-path="iproute2-cheatsheet.html#view-multicast-routes">
    <a href="iproute2-cheatsheet.html#view-multicast-routes">3. View multicast routes</a>
</li>
</ul>
</li>
<li class="chapter" data-level="16" data-path="iproute2-cheatsheet.html#network-event-monitoring">
    <a href="iproute2-cheatsheet.html#network-event-monitoring">Network event monitoring</a>
    
<ul class="articles">
<li class="chapter" data-level="16.1" data-path="iproute2-cheatsheet.html#monitor-all-events">
    <a href="iproute2-cheatsheet.html#monitor-all-events">1. Monitor all events</a>
</li>
<li class="chapter" data-level="16.2" data-path="iproute2-cheatsheet.html#monitor-specific-events">
    <a href="iproute2-cheatsheet.html#monitor-specific-events">2. Monitor specific events</a>
</li>
<li class="chapter" data-level="16.3" data-path="iproute2-cheatsheet.html#read-a-log-file-produced-by-rtmon">
    <a href="iproute2-cheatsheet.html#read-a-log-file-produced-by-rtmon">3. Read a log file produced by rtmon</a>
</li>
</ul>
</li>
<li class="chapter" data-level="17" data-path="iproute2-cheatsheet.html#netconf-sysctl-configuration-viewing">
    <a href="iproute2-cheatsheet.html#netconf-sysctl-configuration-viewing">netconf (sysctl configuration viewing)</a>
    
<ul class="articles">
<li class="chapter" data-level="17.1" data-path="iproute2-cheatsheet.html#view-sysctl-configuration-for-all-interfaces">
    <a href="iproute2-cheatsheet.html#view-sysctl-configuration-for-all-interfaces">1. View sysctl configuration for all interfaces</a>
</li>
<li class="chapter" data-level="17.2" data-path="iproute2-cheatsheet.html#view-sysctl-configuration-for-specific-interface">
    <a href="iproute2-cheatsheet.html#view-sysctl-configuration-for-specific-interface">2. View sysctl configuration for specific interface</a>
</li>
</ul>
</li>
        <li class="divider"></li>
        <li>
            <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                Published with GitBook
            </a>
        </li>
    </ul>
</nav>
    </div>
    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
                <!-- Title -->
                <h1>
                    <i class="fa fa-circle-o-notch fa-spin"></i>
                    <a href="iproute2-cheatsheet.html">Overview</a>
                </h1>
            </div>
            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                    <div id="book-search-results">
                        <div class="search-noresults">
                            <section class="normal markdown-section">
                            <div class="page">
    
        <h1 class="book-chapter" id="calibre_toc_2">Overview</h1>
        <div class="section">
            <h3 id="overview" class="calibre9">Overview</h3>
<p class="calibre7">iproute2 is the Linux networking toolkit that replaced net-tools (ifconfig, route, arp etc.)</p>
<p class="calibre7">Old style network utilities like ifconfig and route are still there just for backwards compatibility and do not provide access to new features like policy-based routing or network namespaces.</p>
<p class="calibre7">Note that iproute2 has been a <strong class="calibre10">standard Linux tool</strong> since the early 2000&#39;s. It&#39;s included in every distro by default, or at least available from the repos (OpenWRT is one of the cases).</p>
<p class="calibre7">iproute2 was originally written by Alex Kuznetsov and is now maintained by Stephen Hemminger.</p>
<p class="calibre7">This document aims to provide comprehensive but easy to use documentation for the ip command included in iproute2 package. There are more, such as ss (netstat replacement, fairly straightforward), tc (QoS management), but documenting them in this style, especially tc, would be a separate big project.</p>
<p class="calibre7">Instead of listing commands and describing what they do, it uses a task-centered approach and gives commands for tasks that network administrators need to do. It was once called a “cheatsheet” for this reason, but has long outgrown the size and scope of a cheat sheet for the most common tasks.</p>
<p class="calibre7">Contributions are always welcome, you can find the “source code” at <a href="https://github.com/dmbaturin/iproute2-cheatsheet" target="_blank" class="pcalibre pcalibre1 pcalibre2 calibre8">github.com/dmbaturin/iproute2-cheatsheet</a>.</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">git clone https://github.com/dmbaturin/iproute2-cheatsheet.git
</code></pre><p class="calibre7">This document is provided “as is”, without any warranty. The authors are not liable for any damage related to using it.</p>
<h3 id="general-notes" class="calibre9">General notes</h3>
<p class="calibre7">All commands that change any settings (that is, not just display them) require root privileges.</p>
<p class="calibre7">There are configuration files in /etc/iproute2, mainly for assinging symbolic names to network stack entities such as routing tables. Those files are re-read every time you run the ip command and you don&#39;t need to do anything to apply the changes.</p>
<h3 id="typographic-conventions" class="calibre9">Typographic conventions</h3>
<p class="calibre7">Metasyntactic variables are written in shell-style syntax, ${something}. Optional command parts are in square brackets.</p>
<h3 id="table-of-contents" class="calibre9">Table of contents</h3>
<h3 id="address-management" class="calibre9">Address management</h3>
<hr class="calibre13 pcalibre5 pcalibre6"/>
<p class="calibre7">In this section <code class="pcalibre7 pcalibre8 calibre14">${address}</code> value should be a host address in dotted decimal format, and <code class="pcalibre7 pcalibre8 calibre14">${mask}</code> can be either a dotted decimal subnet mask or a prefix length. That is, both 192.0.2.10/24 and 192.0.2.10/255.255.255.0 are equally acceptable.</p>
<p class="calibre7">If you are not sure if something is a correct host address, use ipcalc or similar program to check.</p>
<h4 id="show-all-addresses" class="calibre9">Show all addresses</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip address show
</code></pre><p class="calibre7">All show commands can be used with -4 or -6 options to show only IPv4 or IPv6 addresses.</p>
<h4 id="show-addresses-for-a-single-interface" class="calibre9">Show addresses for a single interface</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip address show ${interface name}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip address show eth0
</code></pre><h4 id="show-addresses-only-for-running-interfaces" class="calibre9">Show addresses only for running interfaces</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip address show up
</code></pre><h4 id="show-only-static-or-dynamic-ipv6-addresses" class="calibre9">Show only static or dynamic IPv6 addresses</h4>
<p class="calibre7">Show only statically configured addresses:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip address show [dev ${interface}] permanent
</code></pre><p class="calibre7">Show only addresses learnt via autoconfiguration:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip address show [dev ${interface}] dynamic
</code></pre><h4 id="add-an-address-to-an-interface" class="calibre9">Add an address to an interface</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip address add ${address}/${mask} dev ${interface name}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip address add 192.0.2.10/27 dev eth0

ip address add 2001:db8:1::/48 dev tun10
</code></pre><p class="calibre7">You can add as many addresses as you want.</p>
<p class="calibre7">If you add more than one address, your machine will accept packets for all of them. The first address you added will be used as source address for outgoing traffic by default, it&#39;s referred to as primary address.</p>
<p class="calibre7">All additional addresses you set will become secondary addresses.</p>
<h4 id="add-an-address-with-human-readable-description" class="calibre9">Add an address with human-readable description</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip address add ${address}/${mask} dev ${interface name} label ${interface name}:${description}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip address add 192.0.2.1/24 dev eth0 label eth0:WANaddress
</code></pre><p class="calibre7">A label must start with the interface name followed by a colon due to some backwards compatibility issues, otherwise you&#39;ll get an error. Keep the label shorter than sixteen characters, or else you&#39;ll get this error:</p>
<p class="calibre7">RTNETLINK answers: Numerical result out of range</p>
<h4 id="notes" class="calibre9">Notes</h4>
<p class="calibre7">For IPv6 addresses this command has no effect (address will be added, but without a label).</p>
<h4 id="delete-an-address" class="calibre9">Delete an address</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip address delete ${address}/${prefix} dev ${interface name}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip address delete 192.0.2.1/24 dev eth0

ip address delete 2001:db8::1/64 dev tun1
</code></pre><p class="calibre7">Interface name is required. Linux does allow the same address to be configured on multiple interfaces and it has valid use cases.</p>
<h4 id="remove-all-addresses-from-an-interface" class="calibre9">Remove all addresses from an interface</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip address flush dev ${interface name}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip address flush dev eth1
</code></pre><p class="calibre7">By default this command removes both IPv4 and IPv6 addresses. If you want to remove only IPv4 or IPv6 addresses, use “ip -4 address flush” or “ip -6 address flush”.</p>
<h4 class="calibre9">Notes</h4>
<p class="calibre7">There is no way to swap primary and secondary addresses or explicitly set the new primary address. Try to always set the primary address first.</p>
<p class="calibre7">However, if the sysctl variable net.ipv4.conf.${interface}.promote_secondaries is set to 1, when you delete the primary address, the first secondary address will become the new primary.</p>
<p class="calibre7">Note that net.ipv4.conf.default.promote<em class="calibre15">secondaries=1 is _not</em> the universal default setting in all Linux distributions, so check yours before trying it. If it&#39;s set to 0, then when you delete the primary address, <em class="calibre15">all</em> addresses will be removed from the interface.</p>
<p class="calibre7">Secondary IPv6 addresses are always promoted to primary if the primary address is deleted so you don&#39;t need to worry about sysctl settings.</p>
<h3 id="neighbor-arp-and-ndp-table-management" class="calibre9">Neighbor (ARP and NDP) table management</h3>
<hr class="calibre13 pcalibre5 pcalibre6"/>
<p class="calibre7">For ladies and gentlemen who prefer the British spelling, this command family supports the &#34;neighbour&#34; spelling too.</p>
<h4 id="view-neighbor-tables" class="calibre9">View neighbor tables</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip neighbor show
</code></pre><p class="calibre7">All &#34;show&#34; commands support -4 and -6 options to view only IPv4 (ARP) or IPv6 (NDP) neighbors. By default all neighbors are displayed.</p>
<h4 id="view-neighbors-for-single-interface" class="calibre9">View neighbors for single interface</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip neighbor show dev ${interface name}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip neighbor show dev eth0
</code></pre><h4 id="flush-table-for-an-interface" class="calibre9">Flush table for an interface</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip neighbor flush dev ${interface name}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip neighbor flush dev eth1
</code></pre><h4 id="add-a-neighbor-table-entry" class="calibre9">Add a neighbor table entry</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip neighbor add ${network address} lladdr ${link layer address} dev ${interface name}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip neighbor add 192.0.2.1 lladdr 22:ce:e0:99:63:6f dev eth0
</code></pre><p class="calibre7">One of the use cases for it is to add static entry for an interface with disabled ARP to restrict interface usage only by hosts with specific MAC addresses.</p>
<h4 id="delete-a-neighbor-table-entry" class="calibre9">Delete a neighbor table entry</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip neighbor delete ${network address} lladdr ${link layer address} dev ${interface name}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip neighbor delete 192.0.2.1 lladdr 22:ce:e0:99:63:6f dev eth0
</code></pre><p class="calibre7">Allows to delete a static entry, or get rid of an automatically learnt entry without flushing the table.</p>
<h3 id="link-management" class="calibre9">Link management</h3>
<hr class="calibre13 pcalibre5 pcalibre6"/>
<p class="calibre7">Link is another term for a for network interface. Commands from the &#34;ip link&#34; family perform operations that are common for all interface types, like viewing link information or changing the MTU.</p>
<p class="calibre7">Historically &#34;ip link&#34; commands could create all types of interfaces, except for tunnels (IPIP, GRE etc.), L2TPv3, and VXLAN interfaces that have their own commands. In newer iproute2 versions (since at least 3.16) they can create interfaces of all types except L2TPv3, though using special command families for some of them is more convenient.</p>
<p class="calibre7">Note that interface name you set with &#34;name ${name}&#34; parameter of &#34;ip link add&#34; and &#34;ip link set&#34; commands may be arbitrary, and may even contain unicode characters. However, it&#39;s better to stick with ASCII because other programs may not handle unicode correctly.</p>
<p class="calibre7">Also note that other programs, such as iptables, may have their own link name format and length restrictions, so it&#39;s better to use short alphanumeric names, and provide additional information in <a href="#Set%20human-readable%20link%20description" class="pcalibre pcalibre1 pcalibre2 calibre8">link aliases</a>.</p>
<h4 id="show-information-about-all-links" class="calibre9">Show information about all links</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link show

ip link list
</code></pre><p class="calibre7">These commands are equivalent and can be used with the same arguments.</p>
<h4 id="show-information-about-specific-link" class="calibre9">Show information about specific link</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link show dev ${interface name}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link show dev eth0

ip link show dev tun10
</code></pre><p class="calibre7">The word &#34;dev&#34; may be omitted.</p>
<h4 id="bring-a-link-up-or-down" class="calibre9">Bring a link up or down</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link set dev ${interface name} up

ip link set dev ${interface name} down
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link set dev eth0 down

ip link set dev br0 up
</code></pre><p class="calibre7"><strong class="calibre10">Note:</strong> virtual links described below, like VLANs and bridges are in <strong class="calibre10">down</strong> state immediately after creation. You need to bring them up to start using them.</p>
<h4 id="set-human-readable-link-description" class="calibre9">Set human-readable link description</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link set dev ${interface name} alias &#34;${description}&#34;
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link set dev eth0 alias &#34;LAN interface&#34;
</code></pre><p class="calibre7">Link aliases show up in &#34;ip link show&#34; output, like:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP mode DEFAULT qlen 1000
    link/ether 22:ce:e0:99:63:6f brd ff:ff:ff:ff:ff:ff
    alias LAN interface
</code></pre><h4 id="rename-an-interface" class="calibre9">Rename an interface</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link set dev ${old interface name} name ${new interface name}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link set dev eth0 name lan
</code></pre><p class="calibre7">Note that you can&#39;t rename an active interface. You need to bring it down before doing it.</p>
<h4 id="change-link-layer-address-usually-mac-address" class="calibre9">Change link layer address (usually MAC address)</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link set dev ${interface name} address ${address}
</code></pre><p class="calibre7">Link layer address is a pretty broad concept. The most known example is MAC address for ethernet devices. To change MAC address you would need something like:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link set dev eth0 address 22:ce:e0:99:63:6f
</code></pre><h4 id="change-link-mtu" class="calibre9">Change link MTU</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link set dev ${interface name} mtu ${MTU value}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link set dev tun0 mtu 1480
</code></pre><p class="calibre7">MTU stands for &#34;Maximum Transmission Unit&#34;, the maximum size of a frame an interface can transmit at once.</p>
<p class="calibre7">Apart from reducing fragmentation in tunnels like in example above, this is also used to increase performance of gigabit ethernet links that support so called &#34;jumbo frames&#34; (frames up to 9000 bytes large). If all your equipment supports gigabit ethernet, you may want to do something like</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link set dev eth0 mtu 9000
</code></pre><p class="calibre7">Note that you may need to configure it on your L2 switches too, some of them have it disabled by default.</p>
<h4 id="delete-a-link" class="calibre9">Delete a link</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link delete dev ${interface name}
</code></pre><p class="calibre7">Obviously, only virtual links like VLANs or bridges can be deleted.</p>
<h4 id="enable-or-disable-multicast-on-an-interface" class="calibre9">Enable or disable multicast on an interface</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link set ${interface name} multicast on

ip link set ${interface name} multicast off
</code></pre><p class="calibre7">Unless you really understand what you are doing, better not to touch this.</p>
<h4 id="enable-or-disable-arp-on-an-interface" class="calibre9">Enable or disable ARP on an interface</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link set ${interface name} arp on

ip link set ${interface name} arp off
</code></pre><p class="calibre7">One may want to disable ARP to enforce a security policy and allow only specific MACs to communicate with the interface. In this case neighbor table entries for whitelisted MACs should be created manually (see <a href="#Neighbor%20(ARP%20and%20NDP" class="pcalibre pcalibre1 pcalibre2 calibre8">neighbor table management</a> table management) section), or nothing will be able to communicate with that interface.</p>
<p class="calibre7">In most cases it&#39;s better to configure MAC policy on an access layer switch though. Do not change this flag unless you are sure what you are going to do and why.</p>
<h4 id="create-a-vlan-interface" class="calibre9">Create a VLAN interface</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link add name ${VLAN interface name} link ${parent interface name} type vlan id ${tag}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link add name eth0.110 link eth0 type vlan id 110
</code></pre><p class="calibre7">The only type of VLAN supported in Linux is IEEE 802.1q VLAN, legacy implementations like ISL are not supported.</p>
<p class="calibre7">Once you create a VLAN interface, all frames tagged with ${tag} you specified in id option received by ${parent interface} will be processed by that VLAN interface.</p>
<p class="calibre7">eth0.100 name format is traditional, but not required, you can name the interface as you want, just like with other interface types.</p>
<p class="calibre7">VLANs can be created over bridge, bonding and other interfaces capable of processing ethernet frames too.</p>
<h4 id="create-a-qinq-interface-vlan-stacking" class="calibre9">Create a QinQ interface (VLAN stacking)</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link add name ${service interface} link ${physical interface} type vlan proto 802.1ad id ${service tag}
</code></pre><pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link add name ${client interface} link ${service interface} type vlan proto 802.1q id ${client tag}
</code></pre><p class="calibre7">Example:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link add name eth0.100 link eth0 type vlan proto 802.1ad id 100 # Create service tag interface

ip link add name eth0.100.200 link eth0.100 type vlan proto 802.1q id 200 # Create client tag interface
</code></pre><p class="calibre7">VLAN stacking (aka 802.1ad QinQ) is a way to transmit VLAN tagged traffic over another VLAN. The common use case for it is like this: suppose you are a service provider and you have a customer who wants to use your network infrastructure to connect parts of their network to each other. They use multiple VLANs in their network, so an ordinary rented VLAN is not an option. With QinQ you can add a second tag to the customer traffic when it enters your network and remove that tag when it exits, so there are no conflicts and you don&#39;t need to waste VLAN numbers.</p>
<p class="calibre7">The service tag is the VLAN tag the provider uses to carry client traffic through their network. The client tag is the tag set by the customer.</p>
<p class="calibre7">Note that link MTU for the client VLAN interface is not adjusted automatically, you need to take care of it yourself and either decrease the client interface MTU by at least 4 bytes, or increase the parent MTU accordingly.</p>
<p class="calibre7">Standards-compliant QinQ is available since Linux 3.10.</p>
<h4 id="create-pseudo-ethernet-aka-macvlan-interface" class="calibre9">Create pseudo-ethernet (aka macvlan) interface</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link add name ${macvlan interface name} link ${parent interface} type macvlan
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link add name peth0 link eth0 type macvlan
</code></pre><p class="calibre7">You can think of macvlan interfaces as additional virtual MAC addresses on the parent interface. They look like normal ethernet interfaces from user point of view, and handle all traffic for MAC address they are assigned with received by their parent interface.</p>
<p class="calibre7">This is commonly used for testing, or for using several instances of a service identified by MAC when only one physical interface is available.</p>
<p class="calibre7">They also can be used just for IP address separation instead of assigning multiple addresses to the same physical interface, especially if some service can&#39;t operate on a secondary address properly.</p>
<h4 id="create-a-dummy-interface" class="calibre9">Create a dummy interface</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link add name ${dummy interface name} type dummy
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link add name dummy0 type dummy
</code></pre><p class="calibre7">Dummy interfaces work pretty much like loopback interfaces, just there can be as many of them as you want.</p>
<p class="calibre7">The first purpose of them is for communication of programs inside the host.</p>
<p class="calibre7">The second purpose exploits the fact they are always up (unless administratively taken down). This is often used to assign service addresses to them on routers with more than one physical interface. As long as the traffic to the address assigned to a loopback or dummy interface is routed to the machine that owns it, you can access it through any of its interfaces.</p>
<h4 id="create-a-bridge-interface" class="calibre9">Create a bridge interface</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link add name ${bridge name} type bridge
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link add name br0 type bridge
</code></pre><p class="calibre7">Bridge interfaces are virtual ethernet switches. They can be used to relay traffic transparently between ethernet interfaces, and, increasingly common, as ethernet switches for virtual machines running inside hypervisors.</p>
<p class="calibre7">You can assign an IP address to a bridge and it will be visible from all bridge ports.</p>
<p class="calibre7">If this command fails, check if &#34;bridge&#34; module is loaded.</p>
<h4 id="add-an-interface-to-bridge" class="calibre9">Add an interface to bridge</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link set dev ${interface name} master ${bridge name}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link set dev eth0 master br0
</code></pre><p class="calibre7">Interface you added to a bridge becomes a virtual switch port. It operates only on datalink layer and ceases all network layer operation.</p>
<h4 id="remove-interface-from-bridge" class="calibre9">Remove interface from bridge</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link set dev ${interface name} nomaster
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link set dev eth0 nomaster
</code></pre><h4 id="create-a-bonding-interface" class="calibre9">Create a bonding interface</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link add name ${name} type bond
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link add name bond1 type bond
</code></pre><p class="calibre7"><strong class="calibre10">Note:</strong> This is not enough to configure bonding (link aggregation) in any meaningful way. You need to set up bonding parameters according to your situation. This is far beyond the cheat sheet scope, so consult the documentation.</p>
<p class="calibre7">Interfaces are added to the bond group the same way to bridge group, just note that you can&#39;t add it until you take it down.</p>
<h4 id="create-an-intermediate-functional-block-interface" class="calibre9">Create an intermediate functional block interface</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link add ${interface name} type ifb
</code></pre><p class="calibre7">Example:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link add ifb10 type ifb
</code></pre><p class="calibre7">Intermediate functional block devices are used for traffic redirection and mirroring in conjunction with tc. This is also far beyond the scope of this document, consult tc documentation.</p>
<h4 id="create-a-pair-of-virtual-ethernet-devices" class="calibre9">Create a pair of virtual ethernet devices</h4>
<p class="calibre7">Virtual ethernet (veth) devices always come in pairs and work as a bidirectional pipe, whatever comes into one of them, comes out of another. They are used in conjunction with system partitioning features such as network namespaces and containers (OpenVZ and LXC) for connecting one partition to another.</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link add name ${first device name} type veth peer name ${second device name}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link add name veth-host type veth peer name veth-guest
</code></pre><p class="calibre7"><strong class="calibre10">Note:</strong> virtual ethernet devices are created in UP state, no need to bring them up manually after creation.</p>
<h3 id="link-group-management" class="calibre9">Link group management</h3>
<hr class="calibre13 pcalibre5 pcalibre6"/>
<p class="calibre7">Link groups are similar to port ranges found in managed switches. You can add network interfaces to a numbered group and perform operations on all the interfaces from that group at once.</p>
<p class="calibre7">Links not assigned to any group belong to group 0 aka &#34;default&#34;.</p>
<h4 id="add-an-interface-to-a-group" class="calibre9">Add an interface to a group</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link set dev ${interface name} group ${group number}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link set dev eth0 group 42

ip link set dev eth1 group 42
</code></pre><h4 id="remove-an-interface-from-a-group" class="calibre9">Remove an interface from a group</h4>
<p class="calibre7">This can be done by assigning it to the default group.</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link set dev ${interface name} group 0

ip link set dev ${interface} group default
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link set dev tun10 group 0
</code></pre><h4 id="assign-a-symbolic-name-to-a-group" class="calibre9">Assign a symbolic name to a group</h4>
<p class="calibre7">Group names are stored in /etc/iproute2/group file. Symbolic name &#34;default&#34; for group 0 comes exactly from there. You can add your own, one per line, following the same &#34;<code class="pcalibre7 pcalibre8 calibre14">${number} ${name}</code>&#34; format. You can have up to 255 named groups.</p>
<p class="calibre7">Once you configured a group name, number and name can be used interchangeably in ip commands.</p>
<p class="calibre7">Example:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">echo &#34;10 customer-vlans&#34; &gt;&gt; /etc/iproute2/group
</code></pre><p class="calibre7">After that you can use that name in all operations, like in</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link set dev eth0.100 group customer-vlans
</code></pre><h4 id="perform-an-operation-on-a-group" class="calibre9">Perform an operation on a group</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link set group ${group number} ${operation and arguments}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link set group 42 down

ip link set group uplinks mtu 1200
</code></pre><h4 id="view-information-about-links-from-specific-group" class="calibre9">View information about links from specific group</h4>
<p class="calibre7">Use usual information viewing command with &#34;group ${group}&#34; modifier.</p>
<p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link list group 42

ip address show group customers
</code></pre><h3 id="tun-and-tap-devices" class="calibre9">Tun and Tap devices</h3>
<hr class="calibre13 pcalibre5 pcalibre6"/>
<p class="calibre7">Tun and tap devices allow userspace programs to emulate a network device. When the userspace program opens them they get a file descriptor. Packets routed by the kernel networking stack to the device are read from the file descriptor, data the userspace program writes to the file descriptor are injected as local outgoing packets into the networking stack. The difference between the two is:</p>
<ul class="calibre16">
<li class="calibre17">tap sends and receives raw Ethernet frames.</li>
<li class="calibre17">tun sends and receives raw IP packets.</li>
</ul>
<p class="calibre7">There are two types of tun/tap devices: persistent and transient. Transient tun/tap devices are created by userspace programs when they open a special device, and are destroyed automatically when the associated file descriptor is closed. The commands listed here manipulate persistent devices.</p>
<h4 id="view-tuntap-devices" class="calibre9">View tun/tap devices</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip tuntap show
</code></pre><p class="calibre7"><strong class="calibre10">Note:</strong> this command can be abbreviated to &#34;ip tuntap&#34;.</p>
<p class="calibre7">This command is the only way to find out if some device is in tun or tap mode.</p>
<h4 id="add-an-tuntap-device-useable-by-the-root-user" class="calibre9">Add an tun/tap device useable by the root user</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip tuntap add dev ${interface name} mode ${mode}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip tuntap add dev tun0 mode tun

ip tuntap add dev tap9 mode tap
</code></pre><h4 id="add-an-tuntap-device-usable-by-an-ordinary-user" class="calibre9">Add an tun/tap device usable by an ordinary user</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip tuntap add dev ${interface name} mode ${mode} user ${user} group ${group}
</code></pre><p class="calibre7">Example:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip tuntap add dev tun1 mode tun user me group mygroup

ip tuntap add dev tun2 mode tun user 1000 group 1001
</code></pre><h4 id="add-an-tuntap-device-using-an-alternate-packet-format" class="calibre9">Add an tun/tap device using an alternate packet format</h4>
<p class="calibre7">Add meta information to each packet received over the file descriptor. Very few programs expect this information, and including it when it isn&#39;t expected will break things.</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip tuntap add dev ${interface name} mode ${mode} pi
</code></pre><p class="calibre7">Example:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip tuntap add dev tun1 mode tun pi
</code></pre><h4 id="add-an-tuntap-ignoring-flow-control" class="calibre9">Add an tun/tap ignoring flow control</h4>
<p class="calibre7">Normally packets sent to a tun/tap device travel in the same way as packets sent to any other device: they are put on a queue handled by the traffic control engine (which is configured by the tc command). This can be bypassed, thus disabling the traffic control engine for this tun/tap device.</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip tuntap add dev ${interface name} mode ${mode} one_queue
</code></pre><p class="calibre7">Example:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip tuntap add dev tun1 mode tun one_queue
</code></pre><h4 id="delete-tuntap-device" class="calibre9">Delete tun/tap device</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip tuntap del dev ${interface name} mode ${mode}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip tuntap delete dev tun0 mode tun

ip tuntap delete dev tap1 mode tap
</code></pre><p class="calibre7"><strong class="calibre10">Note:</strong> you must specify the mode. The mode is not displayed in &#34;ip link show&#34;, so if you don&#39;t know if it&#39;s TUN or TAP, consult the output of &#34;ip tuntap show&#34;.</p>
<h3 id="tunnel-management" class="calibre9">Tunnel management</h3>
<hr class="calibre13 pcalibre5 pcalibre6"/>
<p class="calibre7">Tunnels are &#34;network wormholes&#34; that look like normal interfaces, but packets sent through them are encapsulated into another protocol and sent to the other side of tunnel through multiple hosts, then decapsulated and processed in usual way, so you can pretend two machines have direct connectivity, while they in fact do not.</p>
<p class="calibre7">This is often used for virtual private networks (in conjunction with encrypted transport protocols like IPsec), or connecting networks that use some protocol via an intermediate network that does not use it (e.g. IPv6 networks separated by an IPv4-only segment).</p>
<p class="calibre7"><strong class="calibre10">Note:</strong> tunnels on their own offer zero security. They are as secure as their underlying network. So if you need security, use them over an encrypted transport, e.g. IPsec.</p>
<p class="calibre7">Linux currently supports IPIP (IPv4 in IPv4), SIT (IPv6 in IPv4), IP6IP6 (IPv6 in IPv6), IPIP6 (IPv4 in IPv6), GRE (virtually anything in anything), and, in very recent versions, VTI (IPv4 in IPsec).</p>
<p class="calibre7">Note that tunnels are created in DOWN state, you need to bring them up.</p>
<p class="calibre7">In this section <code class="pcalibre7 pcalibre8 calibre14">${local endpoint address}</code> and <code class="pcalibre7 pcalibre8 calibre14">${remote endpoint address}</code> refer to addresses assigned to physical interfaces of endpoint. ${address} refers to the address assigned to tunnel interface.</p>
<h4 id="create-an-ipip-tunnel" class="calibre9">Create an IPIP tunnel</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip tunnel add ${interface name} mode ipip local ${local endpoint address} remote ${remote endpoint address}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip tunnel add tun0 mode ipip local 192.0.2.1 remote 198.51.100.3

ip link set dev tun0 up

ip address add 10.0.0.1/30 dev tun0
</code></pre><h4 id="create-a-sit-tunnel" class="calibre9">Create a SIT tunnel</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip tunnel add ${interface name} mode sit local ${local endpoint address} remote ${remote endpoint address}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip tunnel add tun9 mode sit local 192.0.2.1 remote 198.51.100.3

ip link set dev tun9 up

ip address add 2001:db8:1::1/64 dev tun9
</code></pre><p class="calibre7">This type of tunnels is commonly used to provide an IPv4-connected network with IPv6 connectivity. There are so called &#34;tunnel brokers&#34; that provide it to everyone interested, e.g. Hurricane Electric <a href="http://tunnelbroker.net" target="_blank" class="pcalibre pcalibre1 pcalibre2 calibre8">tunnelbroker.net</a>.</p>
<h4 id="create-an-ipip6-tunnel" class="calibre9">Create an IPIP6 tunnel</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip -6 tunnel add ${interface name} mode ipip6 local ${local endpoint address} remote ${remote endpoint address}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip -6 tunnel add tun8 mode ipip6 local 2001:db8:1::1 remote 2001:db8:1::2
</code></pre><p class="calibre7">This type of tunnels will be widely used when transit operators phase IPv4 out (i.e. not any soon).</p>
<h4 id="create-an-ip6ip6-tunnel" class="calibre9">Create an IP6IP6 tunnel</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip -6 tunnel add ${interface name} mode ip6ip6 local ${local endpoint address} remote ${remote endpoint address}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip -6 tunnel add tun3 mode ip6ip6 local 2001:db8:1::1 remote 2001:db8:1::2

ip link set dev tun3 up

ip address add 2001:db8:2:2::1/64 dev tun3
</code></pre><p class="calibre7">Just like IPIP6 these ones aren&#39;t going to be generally useful any soon.</p>
<h4 id="create-a-gretap-ethernet-over-gre-device" class="calibre9">Create a gretap (ethernet over GRE) device</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link add ${interface name} type gretap local ${local endpoint address} remote ${remote endpoint address}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link add gretap0 type gretap local 192.0.2.1 remote 203.0.113.3
</code></pre><p class="calibre7">This type of tunnels encapsulates ethernet frames into IPv4 packets.</p>
<p class="calibre7">Recent kernel and iproute2 versions also support gretap over IPv6, you need to replace the mode with &#34;ip6gretap&#34; to create an IPv6-based link.</p>
<p class="calibre7">This probably should have been in &#34;Links management&#34; section, but as it involves encapsulation, it&#39;s here. Tunnel interface created this way looks like an L2 link, and it can be added to a bridge group. This is used to connect L2 segments via a routed network.</p>
<h4 id="create-a-gre-tunnel" class="calibre9">Create a GRE tunnel</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip tunnel add ${interface name} mode gre local ${local endpoint address} remote ${remote endpoint address}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip tunnel add tun6 mode gre local 192.0.2.1 remote 203.0.113.3

ip link set dev tun6 up

ip address add 192.168.0.1/30 dev tun6

ip address add 2001:db8:1::1/64 dev tun6
</code></pre><p class="calibre7">GRE can encapsulate both IPv4 and IPv6 at the same time. However, by default it uses IPv4 for transport, for GRE over IPv6 there is a separate tunnel mode, &#34;ip6gre&#34;.</p>
<h4 id="create-multiple-gre-tunnels-to-the-same-endpoint" class="calibre9">Create multiple GRE tunnels to the same endpoint</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip tunnel add ${interface name} mode gre local ${local endpoint address} remote ${remote endpoint address} key ${key value}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip tunnel add tun4 mode gre local 192.0.2.1 remote 203.0.113.6 key 123

ip tunnel add tun5 mode gre local 192.0.2.1 remote 203.0.113.6 key 124
</code></pre><p class="calibre7">Keyed tunnels can be used at the same time to unkeyed too. Key may be in dotted decimal IPv4-like format.</p>
<p class="calibre7">Note that key does not add any security to the tunnel. It&#39;s just an identifier used to distinguish one tunnel from another.</p>
<h4 id="create-a-point-to-multipoint-gre-tunnel" class="calibre9">Create a point-to-multipoint GRE tunnel</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip tunnel add ${interface name} mode gre local ${local endpoint address} key ${key value}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip tunnel add tun8 mode gre local 192.0.2.1 key 1234

ip link set dev tun8 up

ip address add 10.0.0.1/27 dev tun8
</code></pre><p class="calibre7">Note the absence of ${remote endpoint address}. This is the same to what is called &#34;mode gre multipoint&#34; in Cisco IOS.</p>
<p class="calibre7">In the absence of remote endpoint address the key is the only way to identify the tunnel traffic, so ${key value} is required.</p>
<p class="calibre7">This type of tunnels allows you to communicate with multiple endpoints by using the same tunnel interface. It&#39;s commonly used in complex VPN setups with multiple endpoints communicating to one another (in Cisco terminology, &#34;dynamic multipoint VPN&#34;).</p>
<p class="calibre7">As there is no explicit remote endpoint address, obviously it is not enough to just create a tunnel. Your system needs to know where the other endpoints are.</p>
<p class="calibre7">In real life NHRP (Next Hop Resolution Protocol) is used for it. For testing you can add peers manually (given remote endpoint uses 203.0.113.6 address on its physical interface and 10.0.0.2 on the tunnel):</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip neighbor add 10.0.0.2 lladdr 203.0.113.6 dev tun8
</code></pre><p class="calibre7">You will have to do it on the remote endpoint too, like:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip neighbor add 10.0.0.1 lladdr 192.0.2.1 dev tun8
</code></pre><p class="calibre7">Note that link-layer address and neighbor address are both IP addresses, so they are on the same OSI layer. This one of the cases where link-layer address concept gets interesting.</p>
<h4 id="create-a-gre-tunnel-over-ipv6" class="calibre9">Create a GRE tunnel over IPv6</h4>
<p class="calibre7">Recent kernel and iproute2 versions support GRE over IPv6. Point-to-point with no key:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip -6 tunnel add name ${interface name} mode ip6gre local ${local endpoint} remote ${remote endpoint}
</code></pre><p class="calibre7">It should support all options and features supported by the IPv4 GRE described above.</p>
<h4 id="delete-a-tunnel" class="calibre9">Delete a tunnel</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip tunnel del ${interface name}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip tunnel del gre1
</code></pre><p class="calibre7">Note that in older iproute2 versions this command did not support the full &#34;delete&#34; word, only &#34;del&#34;. Recent versions allow both full and abbreviated forms (tested in iproute2-ss131122).</p>
<h4 id="modify-a-tunnel" class="calibre9">Modify a tunnel</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip tunnel change ${interface name} ${options}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip tunnel change tun0 remote 203.0.113.89

ip tunnel change tun10 key 23456
</code></pre><p class="calibre7"><strong class="calibre10">Note:</strong> Apparently you can&#39;t add a key to previously unkeyed tunnel. Not sure if it&#39;s a bug or a feature. Also, you can&#39;t change tunnel mode on the fly, for obvious reasons.</p>
<h4 id="view-tunnel-information" class="calibre9">View tunnel information</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip tunnel show

ip tunnel show ${interface name}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip tun show tun99 
tun99: gre/ip  remote 10.46.1.20  local 10.91.19.110  ttl inherit
</code></pre><h3 id="l2tpv3-pseudowire-management" class="calibre9">L2TPv3 pseudowire management</h3>
<hr class="calibre13 pcalibre5 pcalibre6"/>
<p class="calibre7"><a href="http://tools.ietf.org/html/rfc3931" target="_blank" class="pcalibre pcalibre1 pcalibre2 calibre8">L2TPv3</a> is a tunneling protocol commonly used for L2 pseudowires.</p>
<p class="calibre7">In many distros L2TPv3 is compiled as a module, and may not be loaded by default. If you get a &#34;RTNETLINK answers: No such file or directory&#34; and &#34;Error talking to the kernel&#34; message to any &#34;ip l2tp&#34; command, this is likely the case. Load <strong class="calibre10">l2tp_netlink</strong> and <strong class="calibre10">l2tp_eth</strong> modules. If you want to use L2TPv3 over IP rather than UDP, also load <strong class="calibre10">l2tp_ip</strong>.</p>
<p class="calibre7">Compared to other tunneling protocol implementations in Linux, L2TPv3 terminology is somewhat reversed. You create a <em class="calibre15">tunnel</em>, and then bind <em class="calibre15">sessions</em> to it. You can bind multiple sessions with different identifiers to the same tunnel. Virtual network interfaces (by default named l2tpethX) are associated with <em class="calibre15">sessions</em>.</p>
<p class="calibre7"><strong class="calibre10">Note:</strong> Linux kernel implements only handling of data frames, so you can create only unmanaged tunnels with iproute2, with all settings configured manually on both sides. If you want to use L2TP for remote access VPN or something else other than fixed pseudowire, you need a userspace daemon to handle it. This is outside of this document scope.</p>
<h4 id="create-an-l2tpv3-tunnel-over-udp" class="calibre9">Create an L2TPv3 tunnel over UDP</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip l2tp add tunnel \
tunnel_id ${local tunnel numeric identifier} \
peer_tunnel_id ${remote tunnel numeric identifier} \
udp_sport ${source port} \
udp_dport ${destination port} \
encap udp \
local ${local endpoint address} \
remote ${remote endpoint address}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip l2tp add tunnel \
tunnel_id 1 \
peer_tunnel_id 1 \
udp_sport 5000 \
udp_dport 5000 \ 
encap udp \
local 192.0.2.1 \ 
remote 203.0.113.2
</code></pre><p class="calibre7"><strong class="calibre10">Note:</strong> Tunnel identifiers and other settings on both endpoints must match.</p>
<h4 id="create-an-l2tpv3-tunnel-over-ip" class="calibre9">Create an L2TPv3 tunnel over IP</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip l2tp add tunnel \
tunnel_id ${local tunnel numeric identifier} \
peer_tunnel_id {remote tunnel numeric identifier } \
encap ip \
local 192.0.2.1 \
remote 203.0.113.2
</code></pre><p class="calibre7">L2TPv3 encapsulated directly into IP offers less overhead, bug generally is unable to pass through NAT.</p>
<h4 id="create-an-l2tpv3-session" class="calibre9">Create an L2TPv3 session</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip l2tp add session tunnel_id ${local tunnel identifier} \
session_id ${local session numeric identifier} \
peer_session_id ${remote session numeric identifier}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip l2tp add session tunnel_id 1 \ 
session_id 10 \
peer_session_id 10
</code></pre><p class="calibre7"><strong class="calibre10">Notes:</strong> tunnel_id value must match a value of previously created tunnel. Session identifiers on both endpoints must match.</p>
<p class="calibre7">Once you create a tunnel and a session, l2tpethX interface will appear, in down state. Change the state to up and bridge it with another interface or assign an address.</p>
<h4 id="delete-an-l2tpv3-session" class="calibre9">Delete an L2TPv3 session</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip l2tp del session tunnel_id ${tunnel identifier} \
session_id ${session identifier}
</code></pre><p class="calibre7">Examples</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip l2tp del session tunnel_id 1 session_id 1
</code></pre><h4 id="delete-an-l2tpv3-tunnel" class="calibre9">Delete an L2TPv3 tunnel</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip l2tp del tunnel tunnel_id ${tunnel identifier}
</code></pre><p class="calibre7">Examples</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip l2tp del tunnel tunnel_id 1
</code></pre><p class="calibre7"><strong class="calibre10">Note:</strong> You need to delete all sessions associated with a tunnel before deleting it.</p>
<h4 id="view-l2tpv3-tunnel-information" class="calibre9">View L2TPv3 tunnel information</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip l2tp show tunnel

ip l2tp show tunnel tunnel_id ${tunnel identifier}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip l2tp show tunnel tunnel_id 12
</code></pre><h4 id="view-l2tpv3-session-information" class="calibre9">View L2TPv3 session information</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip l2tp show session

ip l2tp show session session_id ${session identifier} \
tunnel_id ${tunnel identifier}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip l2tp show session session_id 1 tunnel_id 12
</code></pre><h3 id="vxlan-management" class="calibre9">VXLAN management</h3>
<hr class="calibre13 pcalibre5 pcalibre6"/>
<p class="calibre7">VXLAN is a layer 2 tunneling protocol that is commonly used in conjunction with virtualization systems such as KVM to connect virtual machines running on different hypervisor nodes to each other and to outside world.</p>
<p class="calibre7">Unlike GRE or L2TPv3 that are point to point, VXLAN replicates some properties of multiple access switched networks by using IP multicast. Also it supports virtual network separation by transmitting a network identifier along with the frame.</p>
<p class="calibre7">The downside is that you will need to use a multicast routing protocol, typically PIM-SM, to get it to work over routed networks.</p>
<p class="calibre7">The underlying encapsulation protocol for VXLAN is UDP.</p>
<h4 id="create-unicast-vxlan-link" class="calibre9">Create unicast VXLAN link</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link add name ${interface name} type vxlan \ 
   id &lt;0-16777215&gt; \
   dev ${source interface} \
   remote ${remote endpoint address} \
   local ${local endpoint address} \
   dstport ${VXLAN destination port}
</code></pre><p class="calibre7">Example:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link add name vxlan0 type vxlan \
   id 42 dev eth0 remote 203.0.113.6 local 192.0.2.1 dstport 4789
</code></pre><p class="calibre7"><strong class="calibre10">Note:</strong> id options means VXLAN Network Identifier (VNI).</p>
<h4 id="create-multicast-vxlan-link" class="calibre9">Create multicast VXLAN link</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link add name ${interface name} type vxlan \
   id &lt;0-16777215&gt; \
   dev ${source interface} \
   group ${multicast address} \ 
   dstport ${VXLAN destination port}
</code></pre><p class="calibre7">Example:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link add name vxlan0 type vxlan \
   id 42 dev eth0 group 239.0.0.1 dstport 4789
</code></pre><p class="calibre7">After that you need to bring the link up and either bridge it with another interface or assign an address.</p>
<h3 id="route-management" class="calibre9">Route management</h3>
<hr class="calibre13 pcalibre5 pcalibre6"/>
<p class="calibre7">For IPv4 routes, you can use either a prefix length or a dotted decimal subnet mask. That is, both 192.0.2.0/24 and 192.0.2.0/255.255.255.0 are equally acceptable.</p>
<p class="calibre7"><strong class="calibre10">Note:</strong> as per the section below, if you set up a static route, and it becomes unreachable because a link goes down, it will be removed and <strong class="calibre10">will never get back on its own</strong>. You may not have noticed this behaviour because in many cases additional software (e.g. NetworkManager or rp-pppoe) takes care of restoring the routes when links go up and down.</p>
<p class="calibre7">If you are going to use your Linux machine as a router, consider installing a routing protocol suite such as <a href="http://quagga.net" target="_blank" class="pcalibre pcalibre1 pcalibre2 calibre8">Quagga</a> or <a href="http://bird.network.cz" target="_blank" class="pcalibre pcalibre1 pcalibre2 calibre8">BIRD</a>. They keep track of interface status and restore routes when a link goes up after going down. Of course they also allow you to use dynamic routing protocols such as OSPF and BGP.</p>
<h4 id="connected-routes" class="calibre9">Connected routes</h4>
<p class="calibre7">Some routes appear in the system without explicit configuration (against your will).</p>
<p class="calibre7">Once you assign an address to an interface, the system calculates its network address and creates a route to it (this is why the subnet mask is required). These routes are called connected routes.</p>
<p class="calibre7">For example, if you assign 203.0.113.25/24 to eth0, a connected route to 203.0.113.0/24 network will be created and the system will know that hosts from that network can be reached directly.</p>
<p class="calibre7">When an interface goes down, connected routes associated with it are removed. This is used for inaccessible gateway detection so routes through gateways that went inaccessible are removed. Same mechanism prevents you from creating routes through inaccessible gateways.</p>
<h4 id="view-all-routes" class="calibre9">View all routes</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip route

ip route show
</code></pre><p class="calibre7">You can use -4 and -6 options to view only IPv4 or IPv6 routes. If no options given, IPv4 routes are displayed. To view IPv6 routes, use:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip -6 route
</code></pre><h4 id="view-routes-to-a-network-and-all-its-subnets" class="calibre9">View routes to a network and all its subnets</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip route show to root ${address}/${mask}
</code></pre><p class="calibre7">For example, if you use 192.168.0.0/24 subnet in your network and it&#39;s broken into 192.168.0.0/25 and 192.168.0.128/25, you can see all those routes with:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip route show to root 192.168.0.0/24
</code></pre><p class="calibre7">Note: the word &#34;to&#34; in this and other show commands is optional.</p>
<h4 id="view-routes-to-a-network-and-all-supernets" class="calibre9">View routes to a network and all supernets</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip route show to match ${address}/${mask}
</code></pre><p class="calibre7">If you want to view routes to 192.168.0.0/24 and all larger subnets, use:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip route show to match 192.168.0.0/24
</code></pre><p class="calibre7">As routers prefer more specific routes to less specific, this is often useful for debugging in situations when traffic to specific subnet is sent the wrong way because a route to it is missing but routes to larger subnets exist.</p>
<h4 id="view-routes-to-exact-subnet" class="calibre9">View routes to exact subnet</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip route show to exact ${address}/${mask}
</code></pre><p class="calibre7">If you want to see the routes to 192.168.0.0/24, but not to, say 192.168.0.0/25 and 192.168.0.0/16, you can use:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip route show to exact 192.168.0.0/24
</code></pre><h4 id="view-only-the-route-actually-used-by-the-kernel" class="calibre9">View only the route actually used by the kernel</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip route get ${address}/${mask}
</code></pre><p class="calibre7">Example:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip route get 192.168.0.0/24
</code></pre><p class="calibre7">Note that in complex routing scenarios like multipath routing, the result may be &#34;correct but not complete&#34;, as it always shows one route that will be used first. In most situations it&#39;s not a problem, but never forget to look at the corresponding &#34;show&#34; command output too.</p>
<h4 id="view-route-cache-pre-36-kernels-only" class="calibre9">View route cache (pre 3.6 kernels only)</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip route show cached
</code></pre><p class="calibre7">Until the version 3.6, Linux used route caching. In older kernels, this command displays the contents of the route cache. It can be used with modifiers described above. In newer kernels it does nothing.</p>
<h4 id="add-a-route-via-gateway" class="calibre9">Add a route via gateway</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip route add ${address}/${mask} via ${next hop}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip route add 192.0.2.128/25 via 192.0.2.1

ip route add 2001:db8:1::/48 via 2001:db8:1::1
</code></pre><h4 id="add-a-route-via-interface" class="calibre9">Add a route via interface</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip route add ${address}/${mask} dev ${interface name}
</code></pre><p class="calibre7">Example:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip route add 192.0.2.0/25 dev ppp0
</code></pre><p class="calibre7">Interface routes are commonly used with point-to-point interfaces like PPP tunnels where next hop address is not required.</p>
<h4 id="change-or-replace-a-route" class="calibre9">Change or replace a route</h4>
<p class="calibre7">You may use &#34;change&#34; command to change parameters of existing routes. &#34;Replace&#34; command can be used to modify existing route or add new one if it doesn&#39;t exist. Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip route change 192.168.2.0/24 via 10.0.0.1

ip route replace 192.0.2.1/27 dev tun0
</code></pre><h4 id="delete-a-route" class="calibre9">Delete a route</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip route delete ${rest of the route statement}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip route delete 10.0.1.0/25 via 10.0.0.1

ip route delete default dev ppp0
</code></pre><h4 id="default-route" class="calibre9">Default route</h4>
<p class="calibre7">There is a shortcut to add default route.</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip route add default via ${address}/${mask}

ip route add default dev ${interface name}
</code></pre><p class="calibre7">These are equivalent to:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip route add 0.0.0.0/0 via ${address}/${mask}

ip route add 0.0.0.0/0 dev ${interface name}
</code></pre><p class="calibre7">With IPv6 routes it also works and is equivalent to ::/0</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip -6 route add default via 2001:db8::1
</code></pre><h4 id="blackhole-routes" class="calibre9">Blackhole routes</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip route add blackhole ${address}/${mask}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip route add blackhole 192.0.2.1/32
</code></pre><p class="calibre7">Traffic to destinations that match a blackhole route is silently discarded.</p>
<p class="calibre7">Blackhole routes have dual purpose. First one is straightforward, to discard traffic sent to unwanted destinations, e.g. known malicious hosts.</p>
<p class="calibre7">The second one is less obvious and uses the &#34;longest match rule&#34; as per RFC1812. In some cases you may want the router to think it has a route to a larger subnet, while you are not using it as a whole, e.g. when advertising the whole subnet via dynamic routing protocols. Large subnets are commonly broken into smaller parts, so if your subnet is 192.0.2.0/24, and you have assigned 192.0.2.1/25 and 192.0.2.129/25 to your interfaces, your system creates connected routes to the /25&#39;s, but not the whole /24, and routing daemons may not want to advertise /24 because you have no route to that exact subnet. The solution is to setup a blackhole route to 192.0.2.0/24. Because routes to smaller subnets are preferred over larger subnets, it will not affect actual routing, but will convince routing daemons there&#39;s a route to the supernet.</p>
<h4 id="other-special-routes" class="calibre9">Other special routes</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip route add unreachable ${address}/${mask}

ip route add prohibit ${address}/${mask}

ip route add throw ${address}/${mask}
</code></pre><p class="calibre7">These routes make the system discard packets and reply with an ICMP error message to the sender.</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">unreachable
</code></pre><p class="calibre7">Sends ICMP &#34;host unreachable&#34;.</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">prohibit
</code></pre><p class="calibre7">Sends ICMP &#34;administratively prohibited&#34;.</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">throw
</code></pre><p class="calibre7">Sends &#34;net unreachable&#34;.</p>
<p class="calibre7">Unlike blackhole routes, these can&#39;t be recommended for stopping unwanted traffic (e.g. DDoS) because they generate a reply packet for every discarded packet and thus create even greater traffic flow. They can be good for implementing internal access policies, but consider firewall for this purpose first.</p>
<p class="calibre7">&#34;Throw&#34; routes may be used for implementing policy-based routing, in non-default tables they stop current table lookup, but don&#39;t send ICMP error messages.</p>
<h4 id="routes-with-different-metric" class="calibre9">Routes with different metric</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip route add ${address}/${mask} via ${gateway} metric ${number}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip route add 192.168.2.0/24 via 10.0.1.1 metric 5

ip route add 192.168.2.0 dev ppp0 metric 10
</code></pre><p class="calibre7">If there are several routes to the same network with different metric value, the one with <strong class="calibre10">the lowest</strong> metric will be preferred.</p>
<p class="calibre7">Important part of this concept is that when an interface goes down, routes that would be rendered useless by this event disappear from the routing table (see the <a href="#Connected%20routes" class="pcalibre pcalibre1 pcalibre2 calibre8">Connected Routes</a> section), and the system will fall back to higher metric routes.</p>
<p class="calibre7">This feature is commonly used to implement backup connections to important destinations.</p>
<h4 id="multipath-routing" class="calibre9">Multipath routing</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip route add ${addresss}/${mask} nexthop via ${gateway 1} weight ${number} nexthop via ${gateway 2} weight ${number}
</code></pre><p class="calibre7">Multipath routes make the system balance packets across several links according to the weight (higher weight is preferred, so gateway/interface with weight of 2 will get roughly two times more traffic than another one with weight of 1). You can have as many gateways as you want and mix gateway and interface routes, like:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip route add default nexthop via 192.168.1.1 weight 1 nexthop dev ppp0 weight 10
</code></pre><p class="calibre7"><strong class="calibre10">Warning:</strong> the downside of this type of balancing is that packets are not guaranteed to be sent back through the same link they came in. This is called &#34;asymmetric routing&#34;. For routers that simply forward packets and don&#39;t do any local traffic processing such as NAT, this is usually normal, and in some cases even unavoidable.</p>
<p class="calibre7">If your system does anything but forwarding packets between interfaces, this may cause problems with incoming connections and some measures should be taken to prevent it.</p>
<h3 id="policy-based-routing" class="calibre9">Policy-based routing</h3>
<hr class="calibre13 pcalibre5 pcalibre6"/>
<p class="calibre7">Policy-based routing (PBR) in Linux is designed the following way: first you create custom routing tables, then you create rules to tell the kernel it should use those tables instead of the default table for specific traffic.</p>
<p class="calibre7">Some tables are predefined:</p>
<p class="calibre7"><strong class="calibre10">local</strong> (table 255)</p>
<p class="calibre7">Contains control routes local and broadcast addresses.</p>
<p class="calibre7"><strong class="calibre10">main</strong> (table 254)</p>
<p class="calibre7">Contains all non-PBR routes. If you don&#39;t specify the table when adding a route, it goes here.</p>
<p class="calibre7"><strong class="calibre10">default</strong> (table 253)</p>
<p class="calibre7">Reserved for post processing, normally unused.</p>
<p class="calibre7">User-defined tables are created automatically when you add the first route to them.</p>
<h4 id="create-a-policy-route" class="calibre9">Create a policy route</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip route add ${route options} table ${table id or name}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip route add 192.0.2.0/27 via 203.0.113.1 table 10

ip route add 0.0.0.0/0 via 192.168.0.1 table ISP2

ip route add 2001:db8::/48 dev eth1 table 100
</code></pre><p class="calibre7"><strong class="calibre10">Notes:</strong> You can use any route options described in &#34;Route management&#34; section in policy routes too, the only difference is the &#34;table ${table id/name}&#34; part at the end.</p>
<p class="calibre7">Numeric table identifiers and names can be used interchangeably. To create your own symbolic names, edit <strong class="calibre10">/etc/iproute2/rt_tables</strong> config file.</p>
<p class="calibre7">&#34;delete&#34;, &#34;change&#34;, &#34;replace&#34;, or any other route actions work with any table too.</p>
<p class="calibre7">&#34;ip route ... table main&#34; or &#34;ip route ... table 254&#34; would have exact same effect to commands without a table part.</p>
<h4 id="view-policy-routes" class="calibre9">View policy routes</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip route show table ${table id or name}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip route show table 100

ip route show table test
</code></pre><p class="calibre7"><strong class="calibre10">Note:</strong> in this case you need the &#34;show&#34; word, the shorthand like &#34;ip route table 120&#34; do not work because the command would be ambiguous.</p>
<h4 id="general-rule-syntax" class="calibre9">General rule syntax</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip rule add ${options} &lt;lookup ${table id or name}|blackhole|prohibit|unreachable&gt;
</code></pre><p class="calibre7">Traffic that matches the ${options} (described below) will be routed according to the table with specified name/id instead of the &#34;main&#34;/254 table if &#34;lookup&#34; action is used.</p>
<p class="calibre7">&#34;blackhole&#34;, &#34;prohibit&#34;, and &#34;unreachable&#34; actions that work the same way to route types with same names. In most of examples we will use &#34;lookup&#34; action as the most common.</p>
<p class="calibre7">For IPv6 rules, use &#34;ip -6&#34;, the rest of the syntax is the same.</p>
<p class="calibre7">&#34;table ${table id or name}&#34; can be used as alias to &#34;lookup ${table id or name}&#34;.</p>
<h4 id="create-a-rule-to-match-a-source-network" class="calibre9">Create a rule to match a source network</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip rule add from ${source network} ${action}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip rule add from 192.0.2.0/24 lookup 10

ip -6 rule add from 2001:db8::/32 prohibit
</code></pre><p class="calibre7"><strong class="calibre10">Notes:</strong> &#34;all&#34; can be used as shorthand to 0.0.0.0/0 or ::/0</p>
<h4 id="create-a-rule-to-match-a-destination-network" class="calibre9">Create a rule to match a destination network</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip rule add to ${destination network} ${action}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip rule add to 192.0.2.0/24 blackhole

ip -6 rule add to 2001:db8::/32 lookup 100
</code></pre><h4 id="create-a-rule-to-match-a-tos-field-value" class="calibre9">Create a rule to match a ToS field value</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip rule add tos ${ToS value} ${action}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip rule add tos 0x10 lookup 110
</code></pre><h4 id="create-a-rule-to-match-a-firewall-mark-value" class="calibre9">Create a rule to match a firewall mark value</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip rule add fwmark ${mark} ${action}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip rule add fwmark 0x11 lookup 100
</code></pre><p class="calibre7"><strong class="calibre10">Note:</strong> See iptables documentation to find out how to set the mark.</p>
<h4 id="create-a-rule-to-match-inbound-interface" class="calibre9">Create a rule to match inbound interface</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip rule add iif ${interface name} ${action}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip rule add iif eth0 lookup 10

ip rule add iif lo lookup 20
</code></pre><p class="calibre7">Rule with &#34;iif lo&#34; (loopback) will match locally generated traffic.</p>
<h4 id="create-a-rule-to-match-outbound-interface" class="calibre9">Create a rule to match outbound interface</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip rule add oif ${interface name} ${action}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip rule add oif eth0 lookup 10
</code></pre><p class="calibre7"><strong class="calibre10">Note:</strong> this works only for locally generated traffic.</p>
<h4 id="set-rule-priority" class="calibre9">Set rule priority</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip rule add ${options} ${action} priority ${value}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip rule add from 192.0.2.0/25 lookup 10 priority 10

ip rule add from 192.0.2.0/24 lookup 20 priority 20
</code></pre><p class="calibre7"><strong class="calibre10">Note:</strong> As rules are traversed from the lowest to the highest priority and processing stops at first match, you need to put more specific rules before less specific. The above example demonstrates rules for 192.0.2.0/24 and its subnet 192.0.2.0/25. If the priorities were reversed and the rule for /25 was placed after the rule for /24, it would never be reached.</p>
<h4 id="show-all-rules" class="calibre9">Show all rules</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip rule show

ip -6 rule show
</code></pre><h4 id="delete-a-rule" class="calibre9">Delete a rule</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip rule del ${options} ${action}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip rule del 192.0.2.0/24 lookup 10
</code></pre><p class="calibre7"><strong class="calibre10">Notes:</strong> You can copy/paste from the output of &#34;ip rule show&#34;/&#34;ip -6 rule show&#34;.</p>
<h4 id="delete-all-rules" class="calibre9">Delete all rules</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip rule flush

ip -6 rule flush
</code></pre><p class="calibre7"><strong class="calibre10">Notes:</strong> this operation is <strong class="calibre10">highly disruptive</strong>. Even if you have not configured any rules, &#34;from all lookup main&#34; rules are initialized by default. On an unconfigured machine you can see this:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">$ ip rule show
0:    from all lookup local 
32766:    from all lookup main 
32767:    from all lookup default 

$ ip -6 rule show
0:    from all lookup local 
32766:    from all lookup main
</code></pre><p class="calibre7">The &#34;from all lookup local&#34; rule is special and cannot be deleted. The &#34;from all lookup main&#34; is not, there may be valid reasons not to have it, e.g. if you want to route only traffic you created explicit rules for. As a side effect, if you do &#34;ip rule flush&#34;, this rule will be deleted, which will make the system <strong class="calibre10">stop routing any traffic</strong> until you restore your rules.</p>
<h3 id="network-namespace-management" class="calibre9">Network namespace management</h3>
<hr class="calibre13 pcalibre5 pcalibre6"/>
<p class="calibre7">Network namespaces are isolated network stack instances within a single machine. They can be used for security domain separation, managing traffic flows between virtual machines and so on.</p>
<p class="calibre7">Every namespace is a complete copy of the networking stack with its own interfaces, addresses, routes etc. You can run processes inside a namespace and bridge namespaces to physical interfaces.</p>
<h4 id="create-a-namespace" class="calibre9">Create a namespace</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip netns add ${namespace name}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip netns add foo
</code></pre><h4 id="list-existing-namespaces" class="calibre9">List existing namespaces</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip netns list
</code></pre><h4 id="delete-a-namespace" class="calibre9">Delete a namespace</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip netns delete ${namespace name}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip netns delete foo
</code></pre><h4 id="run-a-process-inside-a-namespace" class="calibre9">Run a process inside a namespace</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip netns exec ${namespace name} ${command}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip netns exec foo /bin/sh
</code></pre><p class="calibre7"><strong class="calibre10">Note:</strong> assigning a process to a non-default namespace requires root privileges.</p>
<p class="calibre7">You can run any processes inside a namespace, in particular you can run &#34;ip&#34; itself, commands like in this &#34;ip netns exec foo ip link list&#34; in this section are not a special syntax but simply executing another copy of &#34;ip&#34; in a namespace. You can run an interactive shell inside a namespace as well.</p>
<h4 id="list-all-processes-assigned-to-a-namespace" class="calibre9">List all processes assigned to a namespace</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip netns pids ${namespace name}
</code></pre><p class="calibre7">The output will be a list of PIDs.</p>
<h4 id="identify-process-primary-namespace" class="calibre9">Identify process&#39; primary namespace</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip netns identify ${pid}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip netns identify 9000
</code></pre><h4 id="assign-network-interface-to-a-namespace" class="calibre9">Assign network interface to a namespace</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link set dev ${interface name} netns ${namespace name}

ip link set dev ${interface name} netns ${pid}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link set dev eth0.100 netns foo
</code></pre><p class="calibre7"><strong class="calibre10">Note:</strong> once you assign an interface to a namespace, it disappears from the default namespace and you will have to perform all operations with it via &#34;ip netns exec ${netspace name}&#34;, as in &#34;ip netns exec ${netspace name} ip link set dev dummy0 down&#34;.</p>
<p class="calibre7">Moreover, when you move an interface to another namespace, it loses all existing configuration such as IP addresses configured on it and goes to DOWN state. You need to bring it back up and reconfigure.</p>
<p class="calibre7">If you specify a PID instead of a namespace name, the interface gets assigned to the primary namespace of the process with that PID. This way you can reassign an interface back to default namespace with e.g. &#34;ip netns exec ${namespace name} ip link set dev ${intf} netns 1&#34; (since init or another process with PID 1 is pretty much guaranteed to be in default namespace).</p>
<h4 id="connect-one-namespace-to-another" class="calibre9">Connect one namespace to another</h4>
<p class="calibre7">This can be done by creating two veth links and assigning them two different namespaces. Suppose you want to connect namespace &#34;foo&#34; to the default namespace.</p>
<p class="calibre7">Create a pair of veth devices:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link add name veth1 type veth peer name veth2
</code></pre><p class="calibre7">Move veth2 to namespace foo:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip link set dev veth2 netns foo
</code></pre><p class="calibre7">Bring veth2 and add an address in &#34;foo&#34; namespace:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip netns exec foo ip link set dev veth2 up

ip netns exec foo ip address add 10.1.1.1/24 dev veth2
</code></pre><p class="calibre7">Add an address to veth1, which stays in the default namespace:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip address add 10.1.1.2/24 dev veth1
</code></pre><p class="calibre7">Now you can ping 10.1.1.1 which if in foo namespace, and setup routes to subnets configured in other interfaces of that namespace.</p>
<p class="calibre7">If you want switching instead of routing, you can bridge those veth interfaces with other interfaces in corresponding namespaces. Same technique can be used to connect namespaces to physical networks.</p>
<h4 id="monitor-network-namespace-subsystem-events" class="calibre9">Monitor network namespace subsystem events</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip netns monitor
</code></pre><p class="calibre7">Displays events such as creation and deletion of namespaces when they occur.</p>
<h3 id="multicast-management" class="calibre9">Multicast management</h3>
<hr class="calibre13 pcalibre5 pcalibre6"/>
<p class="calibre7">Multicast is mostly handled by applications and routing daemons, so there is not much you can and should do manually here. Multicast-related ip commands are mostly useful for debug.</p>
<h4 id="view-multicast-groups" class="calibre9">View multicast groups</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip maddress show

ip maddress show ${interface name}
</code></pre><p class="calibre7">Example:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">$ip maddress show dev lo
1:    lo
    inet  224.0.0.1
    inet6 ff02::1
    inet6 ff01::1
</code></pre><h4 id="add-a-link-layer-multicast-address" class="calibre9">Add a link-layer multicast address</h4>
<p class="calibre7">You cannot join an IP multicast group manually, but you can add a multicast MAC address (even though it&#39;s rarely needed).</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip maddress add ${MAC address} dev ${interface name}
</code></pre><p class="calibre7">Example:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip maddress add 01:00:5e:00:00:ab dev eth0
</code></pre><h4 id="view-multicast-routes" class="calibre9">View multicast routes</h4>
<p class="calibre7">Multicast routes cannot be added manually, so this command can only show multicast routes installed by a routing daemon. It supports the same modifiers to unicast route viewing commands (iif, table, from etc.).</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip mroute show
</code></pre><h3 id="network-event-monitoring" class="calibre9">Network event monitoring</h3>
<hr class="calibre13 pcalibre5 pcalibre6"/>
<p class="calibre7">You can monitor certain network events with iproute2, such as changes in network configuration, routing tables, and ARP/NDP tables.</p>
<h4 id="monitor-all-events" class="calibre9">Monitor all events</h4>
<p class="calibre7">You may either call the command without parameters or explicitly specify &#34;all&#34;.</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip monitor

ip monitor all
</code></pre><h4 id="monitor-specific-events" class="calibre9">Monitor specific events</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip monitor ${event type}
</code></pre><p class="calibre7">Event type can be:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">link
</code></pre><p class="calibre7">Link state: interfaces going up and down, virtual interfaces getting created or destroyed etc.</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">address
</code></pre><p class="calibre7">Link address changes.</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">route
</code></pre><p class="calibre7">Routing table changes.</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">mroute
</code></pre><p class="calibre7">Multicast routing changes.</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">neigh
</code></pre><p class="calibre7">Changes in neighbor (ARP and NDP) tables.</p>
<p class="calibre7">When there are distinct IPv4 and IPv6 subsystems, the usual &#34;-4&#34; and &#34;-6&#34; options allow you to display events only for specified protocol. As in:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip -4 monitor route

ip -6 monitor neigh

ip -4 monitor address
</code></pre><h4 id="read-a-log-file-produced-by-rtmon" class="calibre9">Read a log file produced by rtmon</h4>
<p class="calibre7">iproute2 includes a program called &#34;rtmon&#34; that serves essentially the same purpose, but writes events to a binary log file instead of displaying them. &#34;ip monitor&#34; command allows you to read files created by the program&#34;.</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip monitor ${event type} file ${path to the log file}
</code></pre><p class="calibre7">rtmon syntax is similar to that of &#34;ip monitor&#34;, except event type is limited to link, address, route, and all; and address family is specified in &#34;-family&#34; option.</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">rtmon [-family &lt;inet|inet6&gt;] [&lt;route|link|address|all&gt;] file ${log file path}
</code></pre><h3 id="netconf-sysctl-configuration-viewing" class="calibre9">netconf (sysctl configuration viewing)</h3>
<hr class="calibre13 pcalibre5 pcalibre6"/>
<h4 id="view-sysctl-configuration-for-all-interfaces" class="calibre9">View sysctl configuration for all interfaces</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip netconf show
</code></pre><h4 id="view-sysctl-configuration-for-specific-interface" class="calibre9">View sysctl configuration for specific interface</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip netconf show dev ${interface}
</code></pre><p class="calibre7">Examples:</p>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">ip netconf show dev eth0
</code></pre><h3 id="contributors" class="calibre9">Contributors:</h3>
<h4 id="content" class="calibre9">Content</h4>
<pre class="calibre11"><code class="pcalibre4 calibre12 pcalibre3">Nicolas Dichtel

Netconf section

Russel Stuart

TUN/TAP section

Phil Huang

Unicast VXLAN

Haishan

dstport option for VXLAN commands

Emil Pederson

promote_secondaries suggestion.

Nick B.

tuntap device deletion command correction
</code></pre><h4 id="grammar-style-typo-fixes" class="calibre9">Grammar, style, typo fixes</h4>
<p class="calibre7">Trick van Staveren, powyginanachochla, Nathan Handler, Bhaskar Sarma Upadhyayula, Geert Stappers, Alex White-Robinson, Achilleas Pipinellis, fauxm, fgtham, eri.</p>
<h4 id="design" class="calibre9">Design</h4>
<p class="calibre7">elico, alex-eri.</p>
<p class="calibre7">Copyright © Daniil Baturin <daniil at="" baturin="" dot="" org="" class="calibre18"> 2013, 2015, 2017.  </daniil></p>
<p class="calibre7"><a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank" class="pcalibre pcalibre1 pcalibre2 calibre8"><img src="c904adad.png" class="calibre19"/></a>  </p>
<p class="calibre7">Last modified: 2017 Nov 23.</p>

        </div>
    
</div>

        
    




                            </section>
                            <!--
                            <footer class="page-footer">
                                    <span class="copyright">
                                        Copyright © jim.plus 2017-2018 all right reserved, powered by Gitbook
                                    </span>
                                    <span class="footer-modification">
                                        Updated at 2018-12-21T12:10:01+08:00
                                    </span>
                            </footer>
                            -->
                        </div>
                        <div class="search-results">
                            <div class="has-results">
                                <h1 class="search-results-title">
                                    <span class='search-results-count'></span>
                                    results matching "<span class='search-query'></span>"
                                </h1>
                                <ul class="search-results-list"></ul>
                            </div>
                            <div class="no-results">
                                <h1 class="search-results-title">
                                    No results matching "<span class='search-query'></span>"
                                </h1>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <a href="index.html" class="navigation navigation-prev navigation-unique"
           aria-label="Previous page: Introduction">
            <i class="fa fa-angle-left"></i>
        </a>
    </div>

    <div class="back-to-top" style="display: block;"><i class="fa fa-arrow-up"></i></div>
    <script>
        var gitbook = gitbook || [];
        gitbook.push(function () {
            gitbook.page.hasChanged({
                "page": {
                    "title": "Changes",
                    "level": "2.1",
                    "depth": 1,
                    "next": {
                        "title": "Address management",
                        "level": "2.2",
                        "depth": 1,
                        "path": "next.md",
                        "ref": "next.md",
                        "articles": []
                    },
                    "previous": {
                        "title": "Introduction",
                        "level": "1.1",
                        "depth": 1,
                        "path": "prev.md",
                        "ref": "prev.md",
                        "articles": []
                    },
                    "dir": "ltr"
                },
                "config": {
                    "gitbook": "*",
                    "theme": "default",
                    "variables": {},
                    "plugins": [],
                    "pluginsConfig": {
                        "highlight": {},
                        "search": {},
                        "lunr": {"maxIndexSize": 1000000, "ignoreSpecialCharacters": false},
                        "sharing": {
                            "facebook": true,
                            "twitter": true,
                            "google": false,
                            "weibo": false,
                            "instapaper": false,
                            "vk": false,
                            "all": ["facebook", "google", "twitter", "weibo", "instapaper"]
                        },
                        "fontsettings": {"theme": "white", "family": "sans", "size": 2},
                        "theme-default": {
                            "styles": {
                                "website": "styles/website.css",
                                "pdf": "styles/pdf.css",
                                "epub": "styles/epub.css",
                                "mobi": "styles/mobi.css",
                                "ebook": "styles/ebook.css",
                                "print": "styles/print.css"
                            }, "showLevel": false
                        }
                    },
                    "structure": {
                        "langs": "LANGS.md",
                        "readme": "README.md",
                        "glossary": "GLOSSARY.md",
                        "summary": "SUMMARY.md"
                    },
                    "pdf": {
                        "pageNumbers": true,
                        "fontSize": 12,
                        "fontFamily": "Arial",
                        "paperSize": "a4",
                        "chapterMark": "pagebreak",
                        "pageBreaksBefore": "/",
                        "margin": {"right": 62, "left": 62, "top": 56, "bottom": 56}
                    },
                    "styles": {
                        "website": "styles/website.css",
                        "pdf": "styles/pdf.css",
                        "epub": "styles/epub.css",
                        "mobi": "styles/mobi.css",
                        "ebook": "styles/ebook.css",
                        "print": "styles/print.css"
                    }
                },
                "file": {"path": "content.md", "mtime": "2018-03-02T08:30:36.677Z", "type": "markdown"},
                "gitbook": {"version": "3.2.3", "time": "2018-03-02T08:32:31.453Z"},
                "basePath": ".",
                "book": {"language": ""}
            });
        });
    </script>
</div>
<script src="/public/gitbook/gitbook.js"></script>
<script src="/public/gitbook/theme.js"></script>
<script src="/public/gitbook/gitbook-plugin-back-to-top-button/plugin.js"></script>
<script src="/public/gitbook/gitbook-plugin-page-toc-button/plugin.js"></script>
<!--
<script src="/public/gitbook/gitbook-plugin-search/search-engine.js"></script>
<script src="/public/gitbook/gitbook-plugin-search/search.js"></script>
<script src="/public/gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
<script src="/public/gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
-->
<script src="/public/gitbook/gitbook-plugin-search-plus/jquery.mark.min.js"></script>
<script src="/public/gitbook/gitbook-plugin-search-plus/search.js"></script>
<script src="/public/gitbook/gitbook-plugin-sharing/buttons.js"></script>
<script src="/public/gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
<script src="/public/gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.js"></script>
<script src="/public/gitbook/gitbook-plugin-splitter/splitter.js"></script>

<script src="/public/gitbook/gitbook-plugin-medium-zoom/medium-zoom.min.js"></script>
</body>
</html>